"use strict";var Al=Object.create;var _r=Object.defineProperty;var Pl=Object.getOwnPropertyDescriptor;var kl=Object.getOwnPropertyNames;var Ll=Object.getPrototypeOf,Rl=Object.prototype.hasOwnProperty;var U=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$l=(e,t)=>{for(var r in t)_r(e,r,{get:t[r],enumerable:!0})},zo=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of kl(t))!Rl.call(e,o)&&o!==r&&_r(e,o,{get:()=>t[o],enumerable:!(n=Pl(t,o))||n.enumerable});return e};var ne=(e,t,r)=>(r=e!=null?Al(Ll(e)):{},zo(t||!e||!e.__esModule?_r(r,"default",{value:e,enumerable:!0}):r,e)),Ol=e=>zo(_r({},"__esModule",{value:!0}),e);var qo=U((Fp,Xo)=>{Xo.exports=Zo;Zo.sync=Nl;var jo=require("fs");function Fl(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function Yo(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:Fl(t,r)}function Zo(e,t,r){jo.stat(e,function(n,o){r(n,n?!1:Yo(o,e,t))})}function Nl(e,t){return Yo(jo.statSync(e),e,t)}});var ri=U((Np,ti)=>{ti.exports=Qo;Qo.sync=Dl;var Jo=require("fs");function Qo(e,t,r){Jo.stat(e,function(n,o){r(n,n?!1:ei(o,t))})}function Dl(e,t){return ei(Jo.statSync(e),t)}function ei(e,t){return e.isFile()&&Ul(e,t)}function Ul(e,t){var r=e.mode,n=e.uid,o=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8),f=a|c,b=r&l||r&c&&o===s||r&a&&n===i||r&f&&i===0;return b}});var oi=U((Up,ni)=>{var Dp=require("fs"),Nr;process.platform==="win32"||global.TESTING_WINDOWS?Nr=qo():Nr=ri();ni.exports=En;En.sync=Vl;function En(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){En(e,t||{},function(i,s){i?o(i):n(s)})})}Nr(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function Vl(e,t){try{return Nr.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var di=U((Vp,ui)=>{var zt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ii=require("path"),Ml=zt?";":":",si=oi(),ai=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),ci=(e,t)=>{let r=t.colon||Ml,n=e.match(/\//)||zt&&e.match(/\\/)?[""]:[...zt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=zt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=zt?o.split(r):[""];return zt&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:o}},li=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:i}=ci(e,t),s=[],a=l=>new Promise((f,b)=>{if(l===n.length)return t.all&&s.length?f(s):b(ai(e));let v=n[l],x=/^".*"$/.test(v)?v.slice(1,-1):v,A=ii.join(x,e),I=!x&&/^\.[\\\/]/.test(e)?e.slice(0,2)+A:A;f(c(I,l,0))}),c=(l,f,b)=>new Promise((v,x)=>{if(b===o.length)return v(a(f+1));let A=o[b];si(l+A,{pathExt:i},(I,g)=>{if(!I&&g)if(t.all)s.push(l+A);else return v(l+A);return v(c(l,f,b+1))})});return r?a(0).then(l=>r(null,l),r):a(0)},Bl=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=ci(e,t),i=[];for(let s=0;s<r.length;s++){let a=r[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,l=ii.join(c,e),f=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let b=0;b<n.length;b++){let v=f+n[b];try{if(si.sync(v,{pathExt:o}))if(t.all)i.push(v);else return v}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw ai(e)};ui.exports=li;li.sync=Bl});var pi=U((Mp,xn)=>{"use strict";var fi=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};xn.exports=fi;xn.exports.default=fi});var yi=U((Bp,gi)=>{"use strict";var mi=require("path"),zl=di(),Gl=pi();function hi(e,t){let r=e.options.env||process.env,n=process.cwd(),o=e.options.cwd!=null,i=o&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let s;try{s=zl.sync(e.command,{path:r[Gl({env:r})],pathExt:t?mi.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return s&&(s=mi.resolve(o?e.options.cwd:"",s)),s}function Wl(e){return hi(e)||hi(e,!0)}gi.exports=Wl});var wi=U((zp,vn)=>{"use strict";var In=/([()\][%!^"`<>&|;, *?])/g;function Hl(e){return e=e.replace(In,"^$1"),e}function Kl(e,t){return e=`${e}`,e=e.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),e=e.replace(/(?=(\\+?)?)\1$/,"$1$1"),e=`"${e}"`,e=e.replace(In,"^$1"),t&&(e=e.replace(In,"^$1")),e}vn.exports.command=Hl;vn.exports.argument=Kl});var Si=U((Gp,bi)=>{"use strict";bi.exports=/^#!(.*)/});var xi=U((Wp,Ei)=>{"use strict";var jl=Si();Ei.exports=(e="")=>{let t=e.match(jl);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var vi=U((Hp,Ii)=>{"use strict";var Cn=require("fs"),Yl=xi();function Zl(e){let r=Buffer.alloc(150),n;try{n=Cn.openSync(e,"r"),Cn.readSync(n,r,0,150,0),Cn.closeSync(n)}catch{}return Yl(r.toString())}Ii.exports=Zl});var Pi=U((Kp,Ai)=>{"use strict";var Xl=require("path"),Ci=yi(),Ti=wi(),ql=vi(),Jl=process.platform==="win32",Ql=/\.(?:com|exe)$/i,eu=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function tu(e){e.file=Ci(e);let t=e.file&&ql(e.file);return t?(e.args.unshift(e.file),e.command=t,Ci(e)):e.file}function ru(e){if(!Jl)return e;let t=tu(e),r=!Ql.test(t);if(e.options.forceShell||r){let n=eu.test(t);e.command=Xl.normalize(e.command),e.command=Ti.command(e.command),e.args=e.args.map(i=>Ti.argument(i,n));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function nu(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:ru(n)}Ai.exports=nu});var Ri=U((jp,Li)=>{"use strict";var Tn=process.platform==="win32";function An(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function ou(e,t){if(!Tn)return;let r=e.emit;e.emit=function(n,o){if(n==="exit"){let i=ki(o,t);if(i)return r.call(e,"error",i)}return r.apply(e,arguments)}}function ki(e,t){return Tn&&e===1&&!t.file?An(t.original,"spawn"):null}function iu(e,t){return Tn&&e===1&&!t.file?An(t.original,"spawnSync"):null}Li.exports={hookChildProcess:ou,verifyENOENT:ki,verifyENOENTSync:iu,notFoundError:An}});var _i=U((Yp,Gt)=>{"use strict";var $i=require("child_process"),Pn=Pi(),kn=Ri();function Oi(e,t,r){let n=Pn(e,t,r),o=$i.spawn(n.command,n.args,n.options);return kn.hookChildProcess(o,n),o}function su(e,t,r){let n=Pn(e,t,r),o=$i.spawnSync(n.command,n.args,n.options);return o.error=o.error||kn.verifyENOENTSync(o.status,n),o}Gt.exports=Oi;Gt.exports.spawn=Oi;Gt.exports.sync=su;Gt.exports._parse=Pn;Gt.exports._enoent=kn});var ji=U((pm,Mr)=>{Mr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Mr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Mr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Ji=U((mm,jt)=>{var H=global.process,At=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};At(H)?(Yi=require("assert"),Ht=ji(),Zi=/^win/i.test(H.platform),ur=require("events"),typeof ur!="function"&&(ur=ur.EventEmitter),H.__signal_exit_emitter__?oe=H.__signal_exit_emitter__:(oe=H.__signal_exit_emitter__=new ur,oe.count=0,oe.emitted={}),oe.infinite||(oe.setMaxListeners(1/0),oe.infinite=!0),jt.exports=function(e,t){if(!At(global.process))return function(){};Yi.equal(typeof e,"function","a callback must be provided for exit handler"),Kt===!1&&_n();var r="exit";t&&t.alwaysLast&&(r="afterexit");var n=function(){oe.removeListener(r,e),oe.listeners("exit").length===0&&oe.listeners("afterexit").length===0&&Br()};return oe.on(r,e),n},Br=function(){!Kt||!At(global.process)||(Kt=!1,Ht.forEach(function(t){try{H.removeListener(t,zr[t])}catch{}}),H.emit=Gr,H.reallyExit=Fn,oe.count-=1)},jt.exports.unload=Br,Pt=function(t,r,n){oe.emitted[t]||(oe.emitted[t]=!0,oe.emit(t,r,n))},zr={},Ht.forEach(function(e){zr[e]=function(){if(At(global.process)){var r=H.listeners(e);r.length===oe.count&&(Br(),Pt("exit",null,e),Pt("afterexit",null,e),Zi&&e==="SIGHUP"&&(e="SIGINT"),H.kill(H.pid,e))}}}),jt.exports.signals=function(){return Ht},Kt=!1,_n=function(){Kt||!At(global.process)||(Kt=!0,oe.count+=1,Ht=Ht.filter(function(t){try{return H.on(t,zr[t]),!0}catch{return!1}}),H.emit=qi,H.reallyExit=Xi)},jt.exports.load=_n,Fn=H.reallyExit,Xi=function(t){At(global.process)&&(H.exitCode=t||0,Pt("exit",H.exitCode,null),Pt("afterexit",H.exitCode,null),Fn.call(H,H.exitCode))},Gr=H.emit,qi=function(t,r){if(t==="exit"&&At(global.process)){r!==void 0&&(H.exitCode=r);var n=Gr.apply(this,arguments);return Pt("exit",H.exitCode,null),Pt("afterexit",H.exitCode,null),n}else return Gr.apply(this,arguments)}):jt.exports=function(){return function(){}};var Yi,Ht,Zi,ur,oe,Br,Pt,zr,Kt,_n,Fn,Xi,Gr,qi});var cs=U((ym,as)=>{"use strict";var{PassThrough:Lu}=require("stream");as.exports=e=>{e={...e};let{array:t}=e,{encoding:r}=e,n=r==="buffer",o=!1;t?o=!(r||n):r=r||"utf8",n&&(r=null);let i=new Lu({objectMode:o});r&&i.setEncoding(r);let s=0,a=[];return i.on("data",c=>{a.push(c),o?s=a.length:s+=c.length}),i.getBufferedValue=()=>t?a:n?Buffer.concat(a,s):a.join(""),i.getBufferedLength=()=>s,i}});var ls=U((wm,dr)=>{"use strict";var{constants:Ru}=require("buffer"),$u=require("stream"),{promisify:Ou}=require("util"),_u=cs(),Fu=Ou($u.pipeline),Wr=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Nn(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:r}=t,n=_u(t);return await new Promise((o,i)=>{let s=a=>{a&&n.getBufferedLength()<=Ru.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),i(a)};(async()=>{try{await Fu(e,n),o()}catch(a){s(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&s(new Wr)})}),n.getBufferedValue()}dr.exports=Nn;dr.exports.buffer=(e,t)=>Nn(e,{...t,encoding:"buffer"});dr.exports.array=(e,t)=>Nn(e,{...t,array:!0});dr.exports.MaxBufferError=Wr});var ds=U((bm,us)=>{"use strict";var{PassThrough:Nu}=require("stream");us.exports=function(){var e=[],t=new Nu({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=n,t.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(r),t;function r(i){return Array.isArray(i)?(i.forEach(r),this):(e.push(i),i.once("end",o.bind(null,i)),i.once("error",t.emit.bind(t,"error")),i.pipe(t,{end:!1}),this)}function n(){return e.length==0}function o(i){e=e.filter(function(s){return s!==i}),!e.length&&t.readable&&t.end()}}});var _s=U((Jm,Os)=>{var Ie=require("fs"),Yu=require("util"),Zt=require("path"),qn=require("events"),ks=require("zlib"),$s=require("stream"),m={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSIGFIRST:80,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,MAXFILECOMMENT:65535,ENDL64HDR:20,ENDL64SIG:117853008,ENDL64SIGFIRST:80,ENDL64OFS:8,END64HDR:56,END64SIG:101075792,END64SIGFIRST:80,END64SUB:24,END64TOT:32,END64SIZ:40,END64OFF:48,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FLG_ENTRY_ENC:1,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535},ot=function(e){let t,r,n,o,i,s,c=this,l=e.storeEntries!==!1?{}:null,f=e.file,b=e.nameEncoding?new TextDecoder(e.nameEncoding):null;v();function v(){e.fd?(t=e.fd,x()):Ie.open(f,"r",(d,y)=>{if(d)return c.emit("error",d);t=y,x()})}function x(){Ie.fstat(t,(d,y)=>{if(d)return c.emit("error",d);r=y.size,n=e.chunkSize||Math.round(r/1e3),n=Math.max(Math.min(n,Math.min(128*1024,r)),Math.min(1024,r)),I()})}function A(d,y){if(d||!y)return c.emit("error",d||new Error("Archive read error"));let p=o.lastPos,w=p-o.win.position,R=o.win.buffer,P=o.minPos;for(;--p>=P&&--w>=0;)if(R.length-w>=4&&R[w]===o.firstByte&&R.readUInt32LE(w)===o.sig){o.lastBufferPosition=w,o.lastBytesRead=y,o.complete();return}if(p===P)return c.emit("error",new Error("Bad archive"));if(o.lastPos=p+1,o.chunkSize*=2,p<=P)return c.emit("error",new Error("Bad archive"));let W=Math.min(o.chunkSize,p-P);o.win.expandLeft(W,A)}function I(){let d=Math.min(m.ENDHDR+m.MAXFILECOMMENT,r);o={win:new Zr(t),totalReadLength:d,minPos:r-d,lastPos:r,chunkSize:Math.min(1024,n),firstByte:m.ENDSIGFIRST,sig:m.ENDSIG,complete:g},o.win.read(r-o.chunkSize,o.chunkSize,A)}function g(){let d=o.win.buffer,y=o.lastBufferPosition;try{i=new Hn,i.read(d.slice(y,y+m.ENDHDR)),i.headerOffset=o.win.position+y,i.commentLength?c.comment=d.slice(y+m.ENDHDR,y+m.ENDHDR+i.commentLength).toString():c.comment=null,c.entriesCount=i.volumeEntries,c.centralDirectory=i,i.volumeEntries===m.EF_ZIP64_OR_16&&i.totalEntries===m.EF_ZIP64_OR_16||i.size===m.EF_ZIP64_OR_32||i.offset===m.EF_ZIP64_OR_32?E():(o={},D())}catch(p){c.emit("error",p)}}function E(){let d=m.ENDL64HDR;o.lastBufferPosition>d?(o.lastBufferPosition-=d,k()):(o={win:o.win,totalReadLength:d,minPos:o.win.position-d,lastPos:o.win.position,chunkSize:o.chunkSize,firstByte:m.ENDL64SIGFIRST,sig:m.ENDL64SIG,complete:k},o.win.read(o.lastPos-o.chunkSize,o.chunkSize,A))}function k(){let d=o.win.buffer,y=new Kn;y.read(d.slice(o.lastBufferPosition,o.lastBufferPosition+m.ENDL64HDR));let p=r-y.headerOffset;o={win:o.win,totalReadLength:p,minPos:y.headerOffset,lastPos:o.lastPos,chunkSize:o.chunkSize,firstByte:m.END64SIGFIRST,sig:m.END64SIG,complete:L},o.win.read(r-o.chunkSize,o.chunkSize,A)}function L(){let d=o.win.buffer,y=new jn;y.read(d.slice(o.lastBufferPosition,o.lastBufferPosition+m.END64HDR)),c.centralDirectory.volumeEntries=y.volumeEntries,c.centralDirectory.totalEntries=y.totalEntries,c.centralDirectory.size=y.size,c.centralDirectory.offset=y.offset,c.entriesCount=y.volumeEntries,o={},D()}function D(){o={win:new Zr(t),pos:i.offset,chunkSize:n,entriesLeft:i.volumeEntries},o.win.read(o.pos,Math.min(n,r-o.pos),N)}function N(d,y){if(d||!y)return c.emit("error",d||new Error("Entries read error"));let p=o.pos-o.win.position,w=o.entry,R=o.win.buffer,P=R.length;try{for(;o.entriesLeft>0;){w||(w=new Yn,w.readHeader(R,p),w.headerOffset=o.win.position+p,o.entry=w,o.pos+=m.CENHDR,p+=m.CENHDR);let W=w.fnameLen+w.extraLen+w.comLen,j=W+(o.entriesLeft>1?m.CENHDR:0);if(P-p<j){o.win.moveRight(n,N,p),o.move=!0;return}w.read(R,p,b),e.skipEntryNameValidation||w.validateName(),l&&(l[w.name]=w),c.emit("entry",w),o.entry=w=null,o.entriesLeft--,o.pos+=W,p+=W}c.emit("ready")}catch(W){c.emit("error",W)}}function K(){if(!l)throw new Error("storeEntries disabled")}Object.defineProperty(this,"ready",{get(){return!1}}),this.entry=function(d){return K(),l[d]},this.entries=function(){return K(),l},this.stream=function(d,y){return this.openEntry(d,(p,w)=>{if(p)return y(p);let R=Ce(w),P=new Zn(t,R,w.compressedSize);if(w.method!==m.STORED)if(w.method===m.DEFLATED)P=P.pipe(ks.createInflateRaw());else return y(new Error("Unknown compression method: "+w.method));je(w)&&(P=P.pipe(new Xn(P,w.crc,w.size))),y(null,P)},!1)},this.entryDataSync=function(d){let y=null;if(this.openEntry(d,(w,R)=>{y=w,d=R},!0),y)throw y;let p=Buffer.alloc(d.compressedSize);if(new rt(t,p,0,d.compressedSize,Ce(d),w=>{y=w}).read(!0),y)throw y;if(d.method!==m.STORED)if(d.method===m.DEFLATED||d.method===m.ENHANCED_DEFLATED)p=ks.inflateRawSync(p);else throw new Error("Unknown compression method: "+d.method);if(p.length!==d.size)throw new Error("Invalid size");return je(d)&&new Xr(d.crc,d.size).data(p),p},this.openEntry=function(d,y,p){if(typeof d=="string"&&(K(),d=l[d],!d))return y(new Error("Entry not found"));if(!d.isFile)return y(new Error("Entry is not file"));if(!t)return y(new Error("Archive closed"));let w=Buffer.alloc(m.LOCHDR);new rt(t,w,0,w.length,d.offset,R=>{if(R)return y(R);let P;try{d.readDataHeader(w),d.encrypted&&(P=new Error("Entry encrypted"))}catch(W){P=W}y(P,d)}).read(p)};function Ce(d){return d.offset+m.LOCHDR+d.fnameLen+d.extraLen}function je(d){return(d.flags&8)!==8}function Ye(d,y,p){c.stream(d,(w,R)=>{if(w)p(w);else{let P,W;R.on("error",j=>{W=j,P&&(R.unpipe(P),P.close(()=>{p(j)}))}),Ie.open(y,"w",(j,ge)=>{if(j)return p(j);if(W){Ie.close(t,()=>{p(W)});return}P=Ie.createWriteStream(y,{fd:ge}),P.on("finish",()=>{c.emit("extract",d,y),W||p()}),R.pipe(P)})}})}function xt(d,y,p){if(!y.length)return p();let w=y.shift();w=Zt.join(d,Zt.join(...w)),Ie.mkdir(w,{recursive:!0},R=>{if(R&&R.code!=="EEXIST")return p(R);xt(d,y,p)})}function le(d,y,p,w,R){if(!p.length)return w(null,R);let P=p.shift(),W=Zt.join(d,P.name.replace(y,""));Ye(P,W,j=>{if(j)return w(j,R);le(d,y,p,w,R+1)})}this.extract=function(d,y,p){let w=d||"";if(typeof d=="string"&&(d=this.entry(d),d?w=d.name:w.length&&w[w.length-1]!=="/"&&(w+="/")),!d||d.isDirectory){let R=[],P=[],W={};for(let j in l)if(Object.prototype.hasOwnProperty.call(l,j)&&j.lastIndexOf(w,0)===0){let ge=j.replace(w,""),Ze=l[j];if(Ze.isFile&&(R.push(Ze),ge=Zt.dirname(ge)),ge&&!W[ge]&&ge!=="."){W[ge]=!0;let u=ge.split("/").filter(S=>S);for(u.length&&P.push(u);u.length>1;){u=u.slice(0,u.length-1);let S=u.join("/");if(W[S]||S===".")break;W[S]=!0,P.push(u)}}}P.sort((j,ge)=>j.length-ge.length),P.length?xt(y,P,j=>{j?p(j):le(y,w,R,p,0)}):le(y,w,R,p,0)}else Ie.stat(y,(R,P)=>{P&&P.isDirectory()?Ye(d,Zt.join(y,Zt.basename(d.name)),p):Ye(d,y,p)})},this.close=function(d){s||!t?(s=!0,d&&d()):(s=!0,Ie.close(t,y=>{t=null,d&&d(y)}))};let re=qn.EventEmitter.prototype.emit;this.emit=function(...d){if(!s)return re.call(this,...d)}};ot.setFs=function(e){Ie=e};ot.debugLog=(...e)=>{ot.debug&&console.log(...e)};Yu.inherits(ot,qn.EventEmitter);var tt=Symbol("zip");ot.async=class extends qn.EventEmitter{constructor(t){super();let r=new ot(t);r.on("entry",n=>this.emit("entry",n)),r.on("extract",(n,o)=>this.emit("extract",n,o)),this[tt]=new Promise((n,o)=>{r.on("ready",()=>{r.removeListener("error",o),n(r)}),r.on("error",o)})}get entriesCount(){return this[tt].then(t=>t.entriesCount)}get comment(){return this[tt].then(t=>t.comment)}async entry(t){return(await this[tt]).entry(t)}async entries(){return(await this[tt]).entries()}async stream(t){let r=await this[tt];return new Promise((n,o)=>{r.stream(t,(i,s)=>{i?o(i):n(s)})})}async entryData(t){let r=await this.stream(t);return new Promise((n,o)=>{let i=[];r.on("data",s=>i.push(s)),r.on("end",()=>{n(Buffer.concat(i))}),r.on("error",s=>{r.removeAllListeners("end"),o(s)})})}async extract(t,r){let n=await this[tt];return new Promise((o,i)=>{n.extract(t,r,(s,a)=>{s?i(s):o(a)})})}async close(){let t=await this[tt];return new Promise((r,n)=>{t.close(o=>{o?n(o):r()})})}};var Hn=class{read(t){if(t.length!==m.ENDHDR||t.readUInt32LE(0)!==m.ENDSIG)throw new Error("Invalid central directory");this.volumeEntries=t.readUInt16LE(m.ENDSUB),this.totalEntries=t.readUInt16LE(m.ENDTOT),this.size=t.readUInt32LE(m.ENDSIZ),this.offset=t.readUInt32LE(m.ENDOFF),this.commentLength=t.readUInt16LE(m.ENDCOM)}},Kn=class{read(t){if(t.length!==m.ENDL64HDR||t.readUInt32LE(0)!==m.ENDL64SIG)throw new Error("Invalid zip64 central directory locator");this.headerOffset=nt(t,m.ENDSUB)}},jn=class{read(t){if(t.length!==m.END64HDR||t.readUInt32LE(0)!==m.END64SIG)throw new Error("Invalid central directory");this.volumeEntries=nt(t,m.END64SUB),this.totalEntries=nt(t,m.END64TOT),this.size=nt(t,m.END64SIZ),this.offset=nt(t,m.END64OFF)}},Yn=class{readHeader(t,r){if(t.length<r+m.CENHDR||t.readUInt32LE(r)!==m.CENSIG)throw new Error("Invalid entry header");this.verMade=t.readUInt16LE(r+m.CENVEM),this.version=t.readUInt16LE(r+m.CENVER),this.flags=t.readUInt16LE(r+m.CENFLG),this.method=t.readUInt16LE(r+m.CENHOW);let n=t.readUInt16LE(r+m.CENTIM),o=t.readUInt16LE(r+m.CENTIM+2);this.time=Ls(n,o),this.crc=t.readUInt32LE(r+m.CENCRC),this.compressedSize=t.readUInt32LE(r+m.CENSIZ),this.size=t.readUInt32LE(r+m.CENLEN),this.fnameLen=t.readUInt16LE(r+m.CENNAM),this.extraLen=t.readUInt16LE(r+m.CENEXT),this.comLen=t.readUInt16LE(r+m.CENCOM),this.diskStart=t.readUInt16LE(r+m.CENDSK),this.inattr=t.readUInt16LE(r+m.CENATT),this.attr=t.readUInt32LE(r+m.CENATX),this.offset=t.readUInt32LE(r+m.CENOFF)}readDataHeader(t){if(t.readUInt32LE(0)!==m.LOCSIG)throw new Error("Invalid local header");this.version=t.readUInt16LE(m.LOCVER),this.flags=t.readUInt16LE(m.LOCFLG),this.method=t.readUInt16LE(m.LOCHOW);let r=t.readUInt16LE(m.LOCTIM),n=t.readUInt16LE(m.LOCTIM+2);this.time=Ls(r,n),this.crc=t.readUInt32LE(m.LOCCRC)||this.crc;let o=t.readUInt32LE(m.LOCSIZ);o&&o!==m.EF_ZIP64_OR_32&&(this.compressedSize=o);let i=t.readUInt32LE(m.LOCLEN);i&&i!==m.EF_ZIP64_OR_32&&(this.size=i),this.fnameLen=t.readUInt16LE(m.LOCNAM),this.extraLen=t.readUInt16LE(m.LOCEXT)}read(t,r,n){let o=t.slice(r,r+=this.fnameLen);this.name=n?n.decode(new Uint8Array(o)):o.toString("utf8");let i=t[r-1];this.isDirectory=i===47||i===92,this.extraLen&&(this.readExtra(t,r),r+=this.extraLen),this.comment=this.comLen?t.slice(r,r+this.comLen).toString():null}validateName(){if(/\\|^\w+:|^\/|(^|\/)\.\.(\/|$)/.test(this.name))throw new Error("Malicious entry: "+this.name)}readExtra(t,r){let n,o,i=r+this.extraLen;for(;r<i;)n=t.readUInt16LE(r),r+=2,o=t.readUInt16LE(r),r+=2,m.ID_ZIP64===n&&this.parseZip64Extra(t,r,o),r+=o}parseZip64Extra(t,r,n){n>=8&&this.size===m.EF_ZIP64_OR_32&&(this.size=nt(t,r),r+=8,n-=8),n>=8&&this.compressedSize===m.EF_ZIP64_OR_32&&(this.compressedSize=nt(t,r),r+=8,n-=8),n>=8&&this.offset===m.EF_ZIP64_OR_32&&(this.offset=nt(t,r),r+=8,n-=8),n>=4&&this.diskStart===m.EF_ZIP64_OR_16&&(this.diskStart=t.readUInt32LE(r))}get encrypted(){return(this.flags&m.FLG_ENTRY_ENC)===m.FLG_ENTRY_ENC}get isFile(){return!this.isDirectory}},rt=class{constructor(t,r,n,o,i,s){this.fd=t,this.buffer=r,this.offset=n,this.length=o,this.position=i,this.callback=s,this.bytesRead=0,this.waiting=!1}read(t){ot.debugLog("read",this.position,this.bytesRead,this.length,this.offset),this.waiting=!0;let r;if(t){let n=0;try{n=Ie.readSync(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead)}catch(o){r=o}this.readCallback(t,r,r?n:null)}else Ie.read(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead,this.readCallback.bind(this,t))}readCallback(t,r,n){if(typeof n=="number"&&(this.bytesRead+=n),r||!n||this.bytesRead===this.length)return this.waiting=!1,this.callback(r,this.bytesRead);this.read(t)}},Zr=class{constructor(t){this.position=0,this.buffer=Buffer.alloc(0),this.fd=t,this.fsOp=null}checkOp(){if(this.fsOp&&this.fsOp.waiting)throw new Error("Operation in progress")}read(t,r,n){this.checkOp(),this.buffer.length<r&&(this.buffer=Buffer.alloc(r)),this.position=t,this.fsOp=new rt(this.fd,this.buffer,0,r,this.position,n).read()}expandLeft(t,r){this.checkOp(),this.buffer=Buffer.concat([Buffer.alloc(t),this.buffer]),this.position-=t,this.position<0&&(this.position=0),this.fsOp=new rt(this.fd,this.buffer,0,t,this.position,r).read()}expandRight(t,r){this.checkOp();let n=this.buffer.length;this.buffer=Buffer.concat([this.buffer,Buffer.alloc(t)]),this.fsOp=new rt(this.fd,this.buffer,n,t,this.position+n,r).read()}moveRight(t,r,n){this.checkOp(),n?this.buffer.copy(this.buffer,0,n):n=0,this.position+=n,this.fsOp=new rt(this.fd,this.buffer,this.buffer.length-n,n,this.position+this.buffer.length-n,r).read()}},Zn=class extends $s.Readable{constructor(t,r,n){super(),this.fd=t,this.offset=r,this.length=n,this.pos=0,this.readCallback=this.readCallback.bind(this)}_read(t){let r=Buffer.alloc(Math.min(t,this.length-this.pos));r.length?Ie.read(this.fd,r,0,r.length,this.offset+this.pos,this.readCallback):this.push(null)}readCallback(t,r,n){this.pos+=r,t?(this.emit("error",t),this.push(null)):r?(r!==n.length&&(n=n.slice(0,r)),this.push(n)):this.push(null)}},Xn=class extends $s.Transform{constructor(t,r,n){super(),this.verify=new Xr(r,n),t.on("error",o=>{this.emit("error",o)})}_transform(t,r,n){let o;try{this.verify.data(t)}catch(i){o=i}n(o,t)}},Xr=class e{constructor(t,r){this.crc=t,this.size=r,this.state={crc:-1,size:0}}data(t){let r=e.getCrcTable(),n=this.state.crc,o=0,i=t.length;for(;--i>=0;)n=r[(n^t[o++])&255]^n>>>8;if(this.state.crc=n,this.state.size+=t.length,this.state.size>=this.size){let s=Buffer.alloc(4);if(s.writeInt32LE(~this.state.crc&4294967295,0),n=s.readUInt32LE(0),n!==this.crc)throw new Error("Invalid CRC");if(this.state.size!==this.size)throw new Error("Invalid size")}}static getCrcTable(){let t=e.crcTable;if(!t){e.crcTable=t=[];let r=Buffer.alloc(4);for(let n=0;n<256;n++){let o=n;for(let i=8;--i>=0;)(o&1)!==0?o=3988292384^o>>>1:o=o>>>1;o<0&&(r.writeInt32LE(o,0),o=r.readUInt32LE(0)),t[n]=o}}return t}};function Ls(e,t){let r=Rs(e,16),n=Rs(t,16),o={h:parseInt(r.slice(0,5).join(""),2),m:parseInt(r.slice(5,11).join(""),2),s:parseInt(r.slice(11,16).join(""),2)*2,Y:parseInt(n.slice(0,7).join(""),2)+1980,M:parseInt(n.slice(7,11).join(""),2),D:parseInt(n.slice(11,16).join(""),2)},i=[o.Y,o.M,o.D].join("-")+" "+[o.h,o.m,o.s].join(":")+" GMT+0";return new Date(i).getTime()}function Rs(e,t){let r=(e>>>0).toString(2);for(;r.length<t;)r="0"+r;return r.split("")}function nt(e,t){return e.readUInt32LE(t+4)*4294967296+e.readUInt32LE(t)}Os.exports=ot});var Uc=U((SS,Dc)=>{Dc.exports={Other:0,CR:1,LF:2,Control:4,Extend:8,ZWJ:16,Regional_Indicator:32,Prepend:64,SpacingMark:128,L:256,V:512,T:1024,LV:2048,LVT:4096,Extended_Pictographic:8192,InCB_Linker:16384,InCB_Consonant:32768,InCB_Extend:65536}});var Vc=U((ES,xf)=>{xf.exports={data:"ABAOAAAAAADQjQAAAd4HIfjtnG2oFUUYxx/1nHu29OolvKRSZIIQghSSEFJwwj4YWdzoFcoQyriBHwz8YHDBiSKDLG9YKSEiUX4IFQ0FCaRLoFmUb9mLBqJ+EDOIsAgpjf7b7nCnOTO7M7szu8frPPBjZufleZ6ZeWZm73pwYALRk2ApGAQMvC6UlU2HwUbwDthk0P5DsC2jfifYC0bAQXAE/AhOgXNCu1/A7+ASoAZRD5gMekE/mAFmge1gN9jbSPrOSdPPkM4DX4AvwVFwApwBZ8EFcBH8Bf4GE5pEUXP0uQ/5ac2k/UyktzWT/ncgPYj0rmZip91M6hc1R/U/hPzj4BnwPBgECwT7cb8VKFsZJflVyK9O9cW8gvwb6fM6pO+l+c1It4Lt4Hah/R7k94H94BuhPGZDNMqWlK1gf4rYNovthu1c8x3G8xOYmhKXnUH6c5pf0/h/+8Uo/1Wagz+bev1X0rpGD9GkniS/FjRTvVNRdiO4BcwGc8H8tN3dabqwp1Pv/Sh7WFHOGU4pOz9vws/1qa+PCuXxGHZmjDtQAdL6n1DEgAs7NwnrvCQj5gKBQCAQCAQCgUAgEOgGnsPfrlOE7zlvG3y/WI4+K4W/eYciotVgCGWv8u85SNeDjVHyPXAj8tORbknrtyLdAT5Jnz9Fehnp5zl/S3+F+kPQeRgcAUfBMfAtOB6FulAX6kJdqHNdtwPsAQei+u+sQCAwdjnk+d9TNk0Y/Xd1mUFFmfh+vKHhxycbRnoTaDLR0t582mg3oGg7LJWN4JmmoD1YNSUp24b0NJjWR3QnGAT3TcT7Pzh7HdGt1xNF4xKeFvIiu9D25ER1nczqVMeMSUS7kX8M6bvgMKBeMx2BQCAQGJv8gXuhEd8nLaJ/cB+2cCdPaiW/E2ojvyi9oyOkN6B8Df5mmZbW34x0QLjDZ7eS707i/Rr/ZmRua/R3ZPORv6eV1C2MU/R/MP1O9gCeH2mN9n0K+Wdb+rt7EHUrhPpVreS7GH9mQt1ryL+VoWt9Rl3MEuhdJr2vvI8+H4CPwQuo25XqeLHAe81ewf4I8gckf77G80up3uM5voqcRNuX0e800vMW/XwyBH7rEl9EZiC2n6jQ3masyxzY/EHxnXjeVfptIP797rAAkxjO4KNGZ/trjTJz/33O33rTpXPpVBf+1u4cfLqg8Wuxo9+Dnk/1XzQc/6W03RWhrD+dSzI4x+K/eS914Xnnisvp2MY7OrP2ldAToe86MFnQ0X+VnqU2xOfnrCh5f3Oha0GUpPciXQQGrqY5hK9LBX+nK/aebaweS8+AZSXnIa9/v4MzTh7b2jH6O/rlJdfiZBeMoUFmjBfy4wz7mBCkPgnz7y6Oq4x/l+sWXeO4lKrsdJvUvYZF111MdfmxLm0NpmI7591853Tj+VJVDGaNoZ3TRtahautDRL/qkm6KlW6Wa2EeXI3N5Ry0SX+e26xJ27K9K5iijNJyjvwsnllZ4mKeZbuy72I5F5VvNr6o+hcVbredoVc3/y7vN/keke0ywS6T6tqOfOE2mQKS8rJ/3A8mpHWfZVl7qq0oV0lbQ9m9bOszt+lb5LWsU8TxN8j9+LnOPnL3Pc73tz4X31fy7mVdDObZcnHfdev3VNV86ebRtF1VUsSui7U0OQ/rEvE8Jsp+j1H5Lbfnecrpa+Nf1XEi2mZUz/qIe4b7oJtDXi8/m85bN69HJOXr2i9Z+0PVVuW36n5x6V8Z/Yw640s+t5nQlpGfOPAdX2XPI5d+iP6wDJ8YFdvfRc/bOkR31jKpXHx2eb7J91kd7yaMOseb9w6Vp7PO9YyFUWeMM6pvfC7mhBXoI78z1SnyfDPLvqoyRp1nmNieZeAqRlUxV+Ssz3vvdSWm/paJ87ruuipsyTGmssfI3X4zWSMVTFNOlD1PNjbK+OeKsmI6b/J4mdTWp+TZ8jkfRXXEwgz0lPXZx9z7PruqOhdNYlqMZR2qeHe1N33OQdYYVeWyiG3l/rKeKteS2/UhXDdP885CMaWcPqbzaBJTOt1ViqnPjOqJmSzxcbfWtQ6iMNLPv6tx5om8fxh1niUu/GA5mMalq3lQnQ+25PmtspnlDxdRrwupaw/7WCvb9VLpynrWlbkURp17zrcPjNT7rSopsr9cnX95+861PRN/bM8Y1/YZmd0//Fmnp0oxvRvk5yJ2TNqwArpdiY+Y4Kk8b1nzWGSOGZnFF29nK1ynHAuiraK6XUudPlRh2+ZM1d3xJnp9S9H3Op2OKu4Xn7qrfn9gVO+Za3oe6vrq7vWq3z24Py6Fkf59Qjd2VzZ0dnXC62x89iGi7xwuumebc8ZUZFum81BlvKoka+19+cLIPGZU7fizT3GlP29+xfEwKa864+oUk3OCkXp9maJtFeLaJqNisctTG9HFRh13XZaoxmd6T7sWRuZz5Ssus3zgIseI2F7WVbWYzFsVsWZzT5veHWVE1qWaj7w4cyWma6TyMW8cTJP37bvchqQ6Gx+YAlkfL/exPqIt0b5r4brz5lPVzqfo9GfZLRrTNmMx1cfIz5z5Pkd9ntfyvilCnv6y/tr2q+ouM/WhbPyX2UNFdPqSqs6pLLuucWXLZAw24/UlOt9dzqELn1z5Zrtv8uz6EF82ZlaEK2FU7vtpXcIsydJRhbCa+e8/D60bUcbXTMMzfRK24nKssvgYr+x71lh8iO/1tBl/LPGlIseAT6q2J8m/"}});var Mc=U((xS,If)=>{If.exports={data:"AAACAAAAAACAOAAAAbYBSf7t2S1IBEEYBuDVDZ7FYrQMNsFiu3hgEYOI0SCXRIUrB8JhEZtgs5gEg1GMFk02m82oGI02m+9xezCOczv/uwv3fvAwc/PzfXOzcdqzWdaBDdiGPdiHdjE+DS3RNDuCfsn8idQ/g3OH3BdwKf0e96/gumTfYcncLdzBPTzAo+RZ+f0Cr/AG7/AJX4738x1wtz9FO5PX/50n6UXMNdfg/0lERERERERERERERETpdedHBvDRql4nq0cXtW9af98qdRby0Vvp8K4W0V+C5Xw0t4J2bfjeBp3cnEu1brnnCTYNa7eKdz91XP7WO9Lb4GqRb7cY6xbtAdqeVOsY/QGcevw/tb6OT85YhvfKYEx9CMuxKsKnrs+eJtVInVvHJ0eVYVvTZk2siFVLOCjb61PTZX3MdVWEyP7fjzpmMxdzTyq2Ebue6x61nXRGnzndWpf1an7dXmGYE4Y1ptqqKsK1nu26Ju0ty+maV2Rpvk+qnDZjKUIobUiesdAQE/jmCTmHmsskpFZsVYbtmXRcaoSGUPomunW2derQhDPFjtT1Q/eb8vnm990fq35oHVt11bU9m89c7DNI8Qs="}});var Bc=U((IS,vf)=>{vf.exports={data:"AAgOAAAAAABQfgAAAWMGnPntmm2IVUUYx+dyb2ezXXtBiSCLsKDIiKIIoYINciGwQHrRL2Ufii0qMsv7QVBuQkXhkmW5gksQRhRFSBslbkllHyy3L2XllkXrB3uhF0tQ0Kj+xzN3d3buzJx5PeesOw/8mDNvz/PMnOc8s/fs6asTcgu4A9wF+mjdV9kEa8FqsE5j/DPgeUX/JvASeBW8Bd4GO8CHYDcz7nPwFRgD4+An8Cf4AxwBx0G9QcjrYBt4p5HN/YDqGEF9F7gW3AC6wU1gCVgK5oDlYA8YBXvBGOgHD4FzwSo6fg24EDwBxsEB8Cu1N4ByI1gA/gbfo+0wyuO0vgW8DK5i+tN5tVOyMmUWrs9k6nNxPY/WL0B5Mb2+HOU14HrwY2Ny/CLUbwa3gzsZPT7ZGECnDvdiPQ+ARyhpWxPlWnr9JLfeAdS/43S8qNiTIdq3FeUb9HolOEj7h9H2LtgJPgHr0TZKx31Jy30C/T+g7aDCbpPiuj/fStrTNfQGioWIHr9z+z8iiAEfdg4zdo7Gex6JRCKRSCQSiUQikYrzL367HmLq8zV+yyYJIbOTzva5aJtH2y9CuYBebwdX4PoYyv107ELUe5PsPWBavzHJ3tMtFuhluTWnPxKJRCKRSCQy/TjQCKt/XX3y/+o6HPJs35XNszPO0WQf+FnQfsnpU+vLUN8MdgNyRtZ2Ncp7wBDYDn4D47MIOes0QpaADeDUWsYe5pql3k3IZd3iPp4H6bjnUI6Cf8B1PYQ0wWCPno5IJBKJnJx83eN2fi7NeYd0jKsvr+A7p3749KzkXd2Ap+9R7qfrflhz/ava45m2I7Rcw+lI3/WtAO+Bx5PsG6+nk+xbv7Q/fWe4gc7ZRPu3oNzK6Hktmfy2r036vc82On44yb4ZHKFzPkL5aZJ9f9hH7Y8y+nbheq9irWOpf0z/L8nUWPmL6TuK6/8Uuhpd6r3sRv8cbszZXZm981HOB5fS/itzdIlYyMzpTa85HYtRv422LTPQ/yjd+/SZudvCr1DcV5Iv6W+HFRXaB988Rte2ugJrHKTPW4vx5akK+MWzvoI++Sb9zvKFriy/m8wbwpxXQL/gDNs5Tb+zTPfiza6sHEa5A3w8jWLgM/j6BePvoOBcM33+v6Hj9zvuQ978lR5ihl/bedM0DvN4vwI+NOvy7/SbCkze51WVRfXaCaJEmdlSm+H4lKLsVE3Kvoe2950tZdcnu5T1rISQKuaHovZNZw26/aKxvn0tS6oUG1WWmbAPvtbGjzPU2WvgV4uoEc7PkQ77MhHoYu1K7YvOVhv7uuJ7/QpdLcKtX2ZPthc1A/tEcK/zbAW+/0rbnqRVAlPuk0gC5b5cv1Q+BbIp8kGnX2VjQmT7bLm/Hfp1RfZ3kAdpGZI3h2iMnZCC47ftj+351WJ06PTLxk6I7OxxWH8rd4RCRHHuKC1DbOaIdJyQAn4vuPpqS8d5HVJUfy+p2lXjihIbuya/L2wowkae3TJEZFfmjywnBshRSl9s9Je1v7z9kL7bPE9Fi+xMlf09Z3Ne2KxNFu8qf2x02ojMD9McrpOLivTX9j6F9l/HfmgbotKnfp9nJCHqffFho0hcxWRNhHTarUI8h94PGx28Pp2xrrZ8SehcFToPhvabvbZ5JkXx4etZd4lZfn0+pIz8oMoRunpsbPgUUZ4NaYu1qcr9vC+2MWsa8yHOPlOxfU7L9Fnkg0t+0dGdZ9O38PGr6nPxwzRWXUX0/JmSN09kU+WPyD8f4jM+ioo7lW1femzuv0iXqi5r8yGq/fBts+gca/M8+orLvOc0RJ7P88c0J/m2L/OFbzfVa5LrXc4WH2NsbJrulcsafa+T99lFVwgpwr7JMy47U3T0FiFF56uQuss4j3gfbOb68sUlB6vOjaLPtrbdkLp9nZmqffcpqnurk4NU+oq8rzIx2Xddv8tel+peydar+htBpIufH0J4O2XFCCu2z0GZayjyDMzLS6Z+yGK1Sjmk7RNbtq91zrXQfumeOb58MdGTtxdlngmyc09nTlmxqfMcmvij67OJXV3R3dOQsZznh6qfkOL80M3BuvtW1B7yY2R+FLG/MsnzVXd+aF9VuUk1xzWudPwy1edzz1x8t9UfyndbHTY2yxTdHOCa92zj3CR+Te6fjzX5Ftf9M/E1VC4yzVehROa77/h09cmXb6Zxm2c3pPjSH9bn/wE="}});var Jc=U((vS,qc)=>{var ko=0,Hc=-3;function Lr(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Cf(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new Lr,this.dtree=new Lr}var Kc=new Lr,jc=new Lr,Lo=new Uint8Array(30),Ro=new Uint16Array(30),Yc=new Uint8Array(30),Zc=new Uint16Array(30),Tf=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zc=new Lr,De=new Uint8Array(320);function Xc(e,t,r,n){var o,i;for(o=0;o<r;++o)e[o]=0;for(o=0;o<30-r;++o)e[o+r]=o/r|0;for(i=n,o=0;o<30;++o)t[o]=i,i+=1<<e[o]}function Af(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}var Gc=new Uint16Array(16);function Ao(e,t,r,n){var o,i;for(o=0;o<16;++o)e.table[o]=0;for(o=0;o<n;++o)e.table[t[r+o]]++;for(e.table[0]=0,i=0,o=0;o<16;++o)Gc[o]=i,i+=e.table[o];for(o=0;o<n;++o)t[r+o]&&(e.trans[Gc[t[r+o]]++]=o)}function Pf(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=e.tag&1;return e.tag>>>=1,t}function Ue(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function Po(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,o=0,i=e.tag;do n=2*n+(i&1),i>>>=1,++o,r+=t.table[o],n-=t.table[o];while(n>=0);return e.tag=i,e.bitcount-=o,t.trans[r+n]}function kf(e,t,r){var n,o,i,s,a,c;for(n=Ue(e,5,257),o=Ue(e,5,1),i=Ue(e,4,4),s=0;s<19;++s)De[s]=0;for(s=0;s<i;++s){var l=Ue(e,3,0);De[Tf[s]]=l}for(Ao(zc,De,0,19),a=0;a<n+o;){var f=Po(e,zc);switch(f){case 16:var b=De[a-1];for(c=Ue(e,2,3);c;--c)De[a++]=b;break;case 17:for(c=Ue(e,3,3);c;--c)De[a++]=0;break;case 18:for(c=Ue(e,7,11);c;--c)De[a++]=0;break;default:De[a++]=f;break}}Ao(t,De,0,n),Ao(r,De,n,o)}function Wc(e,t,r){for(;;){var n=Po(e,t);if(n===256)return ko;if(n<256)e.dest[e.destLen++]=n;else{var o,i,s,a;for(n-=257,o=Ue(e,Lo[n],Ro[n]),i=Po(e,r),s=e.destLen-Ue(e,Yc[i],Zc[i]),a=s;a<s+o;++a)e.dest[e.destLen++]=e.dest[a]}}}function Lf(e){for(var t,r,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],r=e.source[e.sourceIndex+3],r=256*r+e.source[e.sourceIndex+2],t!==(~r&65535))return Hc;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,ko}function Rf(e,t){var r=new Cf(e,t),n,o,i;do{switch(n=Pf(r),o=Ue(r,2,0),o){case 0:i=Lf(r);break;case 1:i=Wc(r,Kc,jc);break;case 2:kf(r,r.ltree,r.dtree),i=Wc(r,r.ltree,r.dtree);break;default:i=Hc}if(i!==ko)throw new Error("Data error")}while(!n);return r.destLen<r.dest.length?typeof r.dest.slice=="function"?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest}Af(Kc,jc);Xc(Lo,Ro,4,3);Xc(Yc,Zc,2,1);Lo[28]=0;Ro[28]=258;qc.exports=Rf});var tl=U((CS,el)=>{var $f=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,Qc=(e,t,r)=>{let n=e[t];e[t]=e[r],e[r]=n},Of=e=>{let t=e.length;for(let r=0;r<t;r+=4)Qc(e,r,r+3),Qc(e,r+1,r+2)},_f=e=>{$f&&Of(e)};el.exports={swap32LE:_f}});var il=U((TS,ol)=>{var rl=Jc(),{swap32LE:Ff}=tl(),_o=11,Ut=5,Nf=_o-Ut,Df=65536>>_o,Uf=1<<Nf,Vf=Uf-1,gn=2,Mf=1<<Ut,$o=Mf-1,nl=65536>>Ut,Bf=1024>>Ut,zf=nl+Bf,Gf=zf,Wf=32,Hf=Gf+Wf,Kf=1<<gn,Oo=class{constructor(t){let r=typeof t.readUInt32BE=="function"&&typeof t.slice=="function";if(r||t instanceof Uint8Array){let n;if(r)this.highStart=t.readUInt32LE(0),this.errorValue=t.readUInt32LE(4),n=t.readUInt32LE(8),t=t.slice(12);else{let o=new DataView(t.buffer);this.highStart=o.getUint32(0,!0),this.errorValue=o.getUint32(4,!0),n=o.getUint32(8,!0),t=t.subarray(12)}t=rl(t,new Uint8Array(n)),t=rl(t,new Uint8Array(n)),Ff(t),this.data=new Uint32Array(t.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=t)}get(t){let r;return t<0||t>1114111?this.errorValue:t<55296||t>56319&&t<=65535?(r=(this.data[t>>Ut]<<gn)+(t&$o),this.data[r]):t<=65535?(r=(this.data[nl+(t-55296>>Ut)]<<gn)+(t&$o),this.data[r]):t<this.highStart?(r=this.data[Hf-Df+(t>>_o)],r=this.data[r+(t>>Ut&Vf)],r=(r<<gn)+(t&$o),this.data[r]):this.data[this.data.length-Kf]}};ol.exports=Oo});var sl=U((Fo,No)=>{(function(e,t){typeof Fo=="object"&&typeof No<"u"?No.exports=t():typeof define=="function"&&define.amd?define(t):(function(){var r=e.Base64,n=t();n.noConflict=function(){return e.Base64=r,n},e.Meteor&&(Base64=n),e.Base64=n})()})(typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Fo,function(){"use strict";var e="3.7.7",t=e,r=typeof Buffer=="function",n=typeof TextDecoder=="function"?new TextDecoder:void 0,o=typeof TextEncoder=="function"?new TextEncoder:void 0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=Array.prototype.slice.call(i),a=(function(u){var S={};return u.forEach(function(se,Ee){return S[se]=Ee}),S})(s),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),f=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(u){return new Uint8Array(Array.prototype.slice.call(u,0))},b=function(u){return u.replace(/=/g,"").replace(/[+\/]/g,function(S){return S=="+"?"-":"_"})},v=function(u){return u.replace(/[^A-Za-z0-9\+\/]/g,"")},x=function(u){for(var S,se,Ee,It,Me="",Sn=u.length%3,Or=0;Or<u.length;){if((se=u.charCodeAt(Or++))>255||(Ee=u.charCodeAt(Or++))>255||(It=u.charCodeAt(Or++))>255)throw new TypeError("invalid character found");S=se<<16|Ee<<8|It,Me+=s[S>>18&63]+s[S>>12&63]+s[S>>6&63]+s[S&63]}return Sn?Me.slice(0,Sn-3)+"===".substring(Sn):Me},A=typeof btoa=="function"?function(u){return btoa(u)}:r?function(u){return Buffer.from(u,"binary").toString("base64")}:x,I=r?function(u){return Buffer.from(u).toString("base64")}:function(u){for(var S=4096,se=[],Ee=0,It=u.length;Ee<It;Ee+=S)se.push(l.apply(null,u.subarray(Ee,Ee+S)));return A(se.join(""))},g=function(u,S){return S===void 0&&(S=!1),S?b(I(u)):I(u)},E=function(u){if(u.length<2){var S=u.charCodeAt(0);return S<128?u:S<2048?l(192|S>>>6)+l(128|S&63):l(224|S>>>12&15)+l(128|S>>>6&63)+l(128|S&63)}else{var S=65536+(u.charCodeAt(0)-55296)*1024+(u.charCodeAt(1)-56320);return l(240|S>>>18&7)+l(128|S>>>12&63)+l(128|S>>>6&63)+l(128|S&63)}},k=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,L=function(u){return u.replace(k,E)},D=r?function(u){return Buffer.from(u,"utf8").toString("base64")}:o?function(u){return I(o.encode(u))}:function(u){return A(L(u))},N=function(u,S){return S===void 0&&(S=!1),S?b(D(u)):D(u)},K=function(u){return N(u,!0)},Ce=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,je=function(u){switch(u.length){case 4:var S=(7&u.charCodeAt(0))<<18|(63&u.charCodeAt(1))<<12|(63&u.charCodeAt(2))<<6|63&u.charCodeAt(3),se=S-65536;return l((se>>>10)+55296)+l((se&1023)+56320);case 3:return l((15&u.charCodeAt(0))<<12|(63&u.charCodeAt(1))<<6|63&u.charCodeAt(2));default:return l((31&u.charCodeAt(0))<<6|63&u.charCodeAt(1))}},Ye=function(u){return u.replace(Ce,je)},xt=function(u){if(u=u.replace(/\s+/g,""),!c.test(u))throw new TypeError("malformed base64.");u+="==".slice(2-(u.length&3));for(var S,se="",Ee,It,Me=0;Me<u.length;)S=a[u.charAt(Me++)]<<18|a[u.charAt(Me++)]<<12|(Ee=a[u.charAt(Me++)])<<6|(It=a[u.charAt(Me++)]),se+=Ee===64?l(S>>16&255):It===64?l(S>>16&255,S>>8&255):l(S>>16&255,S>>8&255,S&255);return se},le=typeof atob=="function"?function(u){return atob(v(u))}:r?function(u){return Buffer.from(u,"base64").toString("binary")}:xt,re=r?function(u){return f(Buffer.from(u,"base64"))}:function(u){return f(le(u).split("").map(function(S){return S.charCodeAt(0)}))},d=function(u){return re(p(u))},y=r?function(u){return Buffer.from(u,"base64").toString("utf8")}:n?function(u){return n.decode(re(u))}:function(u){return Ye(le(u))},p=function(u){return v(u.replace(/[-_]/g,function(S){return S=="-"?"+":"/"}))},w=function(u){return y(p(u))},R=function(u){if(typeof u!="string")return!1;var S=u.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(S)||!/[^\s0-9a-zA-Z\-_]/.test(S)},P=function(u){return{value:u,enumerable:!1,writable:!0,configurable:!0}},W=function(){var u=function(S,se){return Object.defineProperty(String.prototype,S,P(se))};u("fromBase64",function(){return w(this)}),u("toBase64",function(S){return N(this,S)}),u("toBase64URI",function(){return N(this,!0)}),u("toBase64URL",function(){return N(this,!0)}),u("toUint8Array",function(){return d(this)})},j=function(){var u=function(S,se){return Object.defineProperty(Uint8Array.prototype,S,P(se))};u("toBase64",function(S){return g(this,S)}),u("toBase64URI",function(){return g(this,!0)}),u("toBase64URL",function(){return g(this,!0)})},ge=function(){W(),j()},Ze={version:e,VERSION:t,atob:le,atobPolyfill:xt,btoa:A,btoaPolyfill:x,fromBase64:w,toBase64:N,encode:N,encodeURI:K,encodeURL:K,utob:L,btou:Ye,decode:w,isValid:R,fromUint8Array:g,toUint8Array:d,extendString:W,extendUint8Array:j,extendBuiltins:ge};return Ze.Base64={},Object.keys(Ze).forEach(function(u){return Ze.Base64[u]=Ze[u]}),Ze})});var cl=U((AS,al)=>{var T=Uc(),jf=Vc().data,Yf=Mc().data,Zf=Bc().data,Do=il(),Uo=sl().Base64,Xf=new Do(Uo.toUint8Array(jf)),qf=new Do(Uo.toUint8Array(Yf)),Jf=new Do(Uo.toUint8Array(Zf));function _(e,t){return(e&t)!==0}function Qf(e,t,r){let n=t.length;for(let o=r;o+1<n;o++){let i=t[o+0],s=t[o+1];switch(e.gb9c){case 0:_(i,T.InCB_Consonant)&&(e.gb9c=1);break;case 1:_(i,T.InCB_Extend)?e.gb9c=1:_(i,T.InCB_Linker)?e.gb9c=2:e.gb9c=_(i,T.InCB_Consonant)?1:0;break;case 2:_(i,T.InCB_Extend|T.InCB_Linker)?e.gb9c=2:e.gb9c=_(i,T.InCB_Consonant)?1:0;break}switch(e.gb11){case 0:_(i,T.Extended_Pictographic)&&(e.gb11=1);break;case 1:_(i,T.Extend)?e.gb11=1:_(i,T.ZWJ)?e.gb11=2:e.gb11=_(i,T.Extended_Pictographic)?1:0;break;case 2:e.gb11=_(i,T.Extended_Pictographic)?1:0;break}switch(e.gb12){case 0:_(i,T.Regional_Indicator)?e.gb12=1:e.gb12=-1;break;case 1:_(i,T.Regional_Indicator)?e.gb12=0:e.gb12=-1;break}switch(e.gb13){case 0:_(i,T.Regional_Indicator)||(e.gb13=1);break;case 1:_(i,T.Regional_Indicator)?e.gb13=2:e.gb13=1;break;case 2:e.gb13=1;break}if(!(_(i,T.CR)&&_(s,T.LF))){if(_(i,T.Control|T.CR|T.LF)||_(s,T.Control|T.CR|T.LF))return o+1-r;if(!(_(i,T.L)&&_(s,T.L|T.V|T.LV|T.LVT))&&!(_(i,T.LV|T.V)&&_(s,T.V|T.T))&&!(_(i,T.LVT|T.T)&&_(s,T.T))&&!_(s,T.Extend|T.ZWJ)&&!_(s,T.SpacingMark)&&!_(i,T.Prepend)&&!(_(s,T.InCB_Consonant)&&e.gb9c===2)&&!(_(s,T.Extended_Pictographic)&&e.gb11===2)&&!(_(s,T.Regional_Indicator)&&e.gb12===1)&&!(_(s,T.Regional_Indicator)&&e.gb13===2))return o+1-r}}return n-r}al.exports=function(t){let r=[],n=[0],o=[];for(let s=0;s<t.length;){let a=t.codePointAt(s);o.push(Xf.get(a)|qf.get(a)|Jf.get(a)),s+=a>65535?2:1,n.push(s)}let i={gb9c:0,gb11:0,gb12:0,gb13:0};for(let s=0;s<o.length;){let a=Qf(i,o,s),c=n[s],l=n[s+a];r.push(t.slice(c,l)),s+=a}return r}});var Ap={};$l(Ap,{default:()=>Tp});module.exports=Ol(Ap);var Ve=require("@raycast/api");var or=require("@raycast/api"),Ja=require("react");var Ae=require("@raycast/api");var Ca=require("@raycast/api");var Fr=require("react"),Go=(0,Fr.createContext)(null),O=()=>{let e=(0,Fr.useContext)(Go);if(e==null)throw new Error("useSelectVaultItem must be used within a VaultItemContext.Provider");return e},Wo=Go;var tr=require("@raycast/api");var Xe=require("@raycast/api"),vt=require("react/jsx-runtime"),_l=e=>{let{description:t,onConfirm:r}=e;function n(o){r(o.password)}return(0,vt.jsxs)(Xe.Form,{navigationTitle:"Confirmation Required",actions:(0,vt.jsx)(Xe.ActionPanel,{children:(0,vt.jsx)(Xe.Action.SubmitForm,{title:"Confirm",onSubmit:n})}),children:[(0,vt.jsx)(Xe.Form.Description,{title:"Confirmation Required for",text:t}),(0,vt.jsx)(Xe.Form.PasswordField,{autoFocus:!0,id:"password",title:"Master Password"})]})},Ho=_l;var er=require("@raycast/api"),st=require("react");var $=require("@raycast/api"),wr=require("react");var Mt=require("@raycast/api");var Le={VISA:"Visa",MASTERCARD:"Mastercard",AMEX:"Amex",DISCOVER:"Discover",DINERS_CLUB:"Diners Club",JCB:"JCB",MAESTRO:"Maestro",UNION_PAY:"UnionPay",RU_PAY:"RuPay",OTHER:"Other"};var Ko="https://bitwarden.com",cr="HIDDEN-VALUE",V={PASSWORD_OPTIONS:"bw-generate-password-options",PASSWORD_ONE_TIME_WARNING:"bw-generate-password-warning-accepted",SESSION_TOKEN:"sessionToken",REPROMPT_HASH:"sessionRepromptHash",SERVER_URL:"cliServer",LAST_ACTIVITY_TIME:"lastActivityTime",VAULT_LOCK_REASON:"vaultLockReason",VAULT_FAVORITE_ORDER:"vaultFavoriteOrder",VAULT_LAST_STATUS:"lastVaultStatus"},Ct={TIMEOUT:"Vault timed out due to inactivity",MANUAL:"Manually locked by the user",SYSTEM_LOCK:"Screen was locked",SYSTEM_SLEEP:"System went to sleep",CLI_UPDATED:"Bitwarden has been updated. Please login again."},Bt=["1","2","3","4","5","6","7","8","9","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","+","-",".",","],Tt={ALL:"all",NO_FOLDER:"no-folder"},ye={IV:"iv",VAULT:"vault",CURRENT_FOLDER_ID:"currentFolderId",SEND_TYPE_FILTER:"sendTypeFilter",CLI_VERSION:"cliVersion"},xe={1:Mt.Icon.Globe,3:Mt.Icon.CreditCard,4:Mt.Icon.Person,2:Mt.Icon.Document,5:Mt.Icon.Key};var _t=require("react");var X=require("@raycast/api");var Ss=require("node:buffer"),Es=ne(require("node:path"),1),zn=ne(require("node:child_process"),1),fr=ne(require("node:process"),1),xs=ne(_i(),1);function Ln(e){let t=typeof e=="string"?`
`:10,r=typeof e=="string"?"\r":13;return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}var lr=ne(require("node:process"),1),Wt=ne(require("node:path"),1),Fi=ne(require("node:url"),1);function Dr(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}function au(e={}){let{cwd:t=lr.default.cwd(),path:r=lr.default.env[Dr()],execPath:n=lr.default.execPath}=e,o,i=t instanceof URL?Fi.default.fileURLToPath(t):t,s=Wt.default.resolve(i),a=[];for(;o!==s;)a.push(Wt.default.join(s,"node_modules/.bin")),o=s,s=Wt.default.resolve(s,"..");return a.push(Wt.default.resolve(i,n,"..")),[...a,r].join(Wt.default.delimiter)}function Ni({env:e=lr.default.env,...t}={}){e={...e};let r=Dr({env:e});return t.path=e[r],e[r]=au(t),e}var cu=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let o=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(t,r);!lu(o,i)&&n||Object.defineProperty(e,r,i)},lu=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},uu=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},du=(e,t)=>`/* Wrapped ${e}*/
${t}`,fu=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),pu=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),mu=(e,t,r)=>{let n=r===""?"":`with ${r.trim()}() `,o=du.bind(null,n,t.toString());Object.defineProperty(o,"name",pu),Object.defineProperty(e,"toString",{...fu,value:o})};function Rn(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:n}=e;for(let o of Reflect.ownKeys(t))cu(e,t,o,r);return uu(e,t),mu(e,t,n),e}var Ur=new WeakMap,Di=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,o=e.displayName||e.name||"<anonymous>",i=function(...s){if(Ur.set(i,++n),n===1)r=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${o}\` can only be called once`);return r};return Rn(i,e),Ur.set(i,n),i};Di.callCount=e=>{if(!Ur.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return Ur.get(e)};var Ui=Di;var Wi=require("node:os");var Vi=function(){let e=Bi-Mi+1;return Array.from({length:e},hu)},hu=function(e,t){return{name:`SIGRT${t+1}`,number:Mi+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Mi=34,Bi=64;var Gi=require("node:os");var zi=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var $n=function(){let e=Vi();return[...zi,...e].map(gu)},gu=function({name:e,number:t,description:r,action:n,forced:o=!1,standard:i}){let{signals:{[e]:s}}=Gi.constants,a=s!==void 0;return{name:e,number:a?s:t,description:r,supported:a,action:n,forced:o,standard:i}};var yu=function(){let e=$n();return Object.fromEntries(e.map(wu))},wu=function({name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s}){return[e,{name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s}]},Hi=yu(),bu=function(){let e=$n(),t=65,r=Array.from({length:t},(n,o)=>Su(o,e));return Object.assign({},...r)},Su=function(e,t){let r=Eu(e,t);if(r===void 0)return{};let{name:n,description:o,supported:i,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:s,forced:a,standard:c}}},Eu=function(e,t){let r=t.find(({name:n})=>Wi.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},cm=bu();var xu=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:o,exitCode:i,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${o})`:i!==void 0?`failed with exit code ${i}`:"failed",On=({stdout:e,stderr:t,all:r,error:n,signal:o,exitCode:i,command:s,escapedCommand:a,timedOut:c,isCanceled:l,killed:f,parsed:{options:{timeout:b}}})=>{i=i===null?void 0:i,o=o===null?void 0:o;let v=o===void 0?void 0:Hi[o].description,x=n&&n.code,I=`Command ${xu({timedOut:c,timeout:b,errorCode:x,signal:o,signalDescription:v,exitCode:i,isCanceled:l})}: ${s}`,g=Object.prototype.toString.call(n)==="[object Error]",E=g?`${I}
${n.message}`:I,k=[E,t,e].filter(Boolean).join(`
`);return g?(n.originalMessage=n.message,n.message=k):n=new Error(k),n.shortMessage=E,n.command=s,n.escapedCommand=a,n.exitCode=i,n.signal=o,n.signalDescription=v,n.stdout=e,n.stderr=t,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!c,n.isCanceled=l,n.killed=f&&!c,n};var Vr=["stdin","stdout","stderr"],Iu=e=>Vr.some(t=>e[t]!==void 0),Ki=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return Vr.map(n=>e[n]);if(Iu(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Vr.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,Vr.length);return Array.from({length:r},(n,o)=>t[o])};var Qi=ne(require("node:os"),1),es=ne(Ji(),1),vu=1e3*5,ts=(e,t="SIGTERM",r={})=>{let n=e(t);return Cu(e,t,r,n),n},Cu=(e,t,r,n)=>{if(!Tu(t,r,n))return;let o=Pu(r),i=setTimeout(()=>{e("SIGKILL")},o);i.unref&&i.unref()},Tu=(e,{forceKillAfterTimeout:t},r)=>Au(e)&&t!==!1&&r,Au=e=>e===Qi.default.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Pu=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return vu;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},rs=(e,t)=>{e.kill()&&(t.isCanceled=!0)},ku=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},ns=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let o,i=new Promise((a,c)=>{o=setTimeout(()=>{ku(e,r,c)},t)}),s=n.finally(()=>{clearTimeout(o)});return Promise.race([i,s])},os=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},is=async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;let o=(0,es.default)(()=>{e.kill()});return n.finally(()=>{o()})};function ss(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}var Vn=ne(ls(),1),fs=ne(ds(),1),ps=(e,t)=>{t!==void 0&&(ss(t)?t.pipe(e.stdin):e.stdin.end(t))},ms=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=(0,fs.default)();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},Dn=async(e,t)=>{if(!(!e||t===void 0)){e.destroy();try{return await t}catch(r){return r.bufferedData}}},Un=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!(!e||!r))return t?(0,Vn.default)(e,{encoding:t,maxBuffer:n}):Vn.default.buffer(e,{maxBuffer:n})},hs=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:o,maxBuffer:i},s)=>{let a=Un(e,{encoding:n,buffer:o,maxBuffer:i}),c=Un(t,{encoding:n,buffer:o,maxBuffer:i}),l=Un(r,{encoding:n,buffer:o,maxBuffer:i*2});try{return await Promise.all([s,a,c,l])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},Dn(e,a),Dn(t,c),Dn(r,l)])}};var Du=(async()=>{})().constructor.prototype,Uu=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Du,e)]),Mn=(e,t)=>{for(let[r,n]of Uu){let o=typeof t=="function"?(...i)=>Reflect.apply(n.value,t(),i):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}return e},gs=e=>new Promise((t,r)=>{e.on("exit",(n,o)=>{t({exitCode:n,signal:o})}),e.on("error",n=>{r(n)}),e.stdin&&e.stdin.on("error",n=>{r(n)})});var ys=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Vu=/^[\w.-]+$/,Mu=/"/g,Bu=e=>typeof e!="string"||Vu.test(e)?e:`"${e.replace(Mu,'\\"')}"`,ws=(e,t)=>ys(e,t).join(" "),bs=(e,t)=>ys(e,t).map(r=>Bu(r)).join(" ");var zu=1e3*1e3*100,Gu=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:o})=>{let i=t?{...fr.default.env,...e}:e;return r?Ni({env:i,cwd:n,execPath:o}):i},Wu=(e,t,r={})=>{let n=xs.default._parse(e,t,r);return e=n.command,t=n.args,r=n.options,r={maxBuffer:zu,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||fr.default.cwd(),execPath:fr.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=Gu(r),r.stdio=Ki(r),fr.default.platform==="win32"&&Es.default.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},Bn=(e,t,r)=>typeof t!="string"&&!Ss.Buffer.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?Ln(t):t;function Is(e,t,r){let n=Wu(e,t,r),o=ws(e,t),i=bs(e,t);os(n.options);let s;try{s=zn.default.spawn(n.file,n.args,n.options)}catch(x){let A=new zn.default.ChildProcess,I=Promise.reject(On({error:x,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return Mn(A,I)}let a=gs(s),c=ns(s,n.options,a),l=is(s,n.options,c),f={isCanceled:!1};s.kill=ts.bind(null,s.kill.bind(s)),s.cancel=rs.bind(null,s,f);let v=Ui(async()=>{let[{error:x,exitCode:A,signal:I,timedOut:g},E,k,L]=await hs(s,n.options,l),D=Bn(n.options,E),N=Bn(n.options,k),K=Bn(n.options,L);if(x||A!==0||I!==null){let Ce=On({error:x,exitCode:A,signal:I,stdout:D,stderr:N,all:K,command:o,escapedCommand:i,parsed:n,timedOut:g,isCanceled:f.isCanceled||(n.options.signal?n.options.signal.aborted:!1),killed:s.killed});if(!n.options.reject)return Ce;throw Ce}return{command:o,escapedCommand:i,exitCode:0,stdout:D,stderr:N,all:K,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return ps(s,n.options.input),s.all=ms(s,n.options),Mn(s,v)}var be=require("fs");var Hu=require("@raycast/api"),Cs=require("crypto");var vs="foobarbazzybaz";function Ts(e){return Object.entries(e).flatMap(([t,r])=>r?[`--${t}`,r]:[])}function Gn(e){return new Promise((t,r)=>{(0,Cs.pbkdf2)(e,vs,1e5,64,"sha512",(n,o)=>{if(n!=null){r(n);return}t(o.toString("hex"))})})}var pr=require("@raycast/api");var Ku={IMMEDIATELY:"0",ONE_MINUTE:"60000",FIVE_MINUTES:"300000",FIFTEEN_MINUTES:"900000",THIRTY_MINUTES:"1800000",ONE_HOUR:"3600000",FOUR_HOURS:"14400000",EIGHT_HOURS:"28800000",ONE_DAY:"86400000",NEVER:"-1",SYSTEM_LOCK:"-2",SYSTEM_SLEEP:"-3"},fe=Object.entries(Ku).reduce((e,[t,r])=>(e[t]=parseInt(r),e),{});var As={[fe.IMMEDIATELY]:"Immediately",[fe.ONE_MINUTE]:"1 Minute",[fe.FIVE_MINUTES]:"5 Minutes",[fe.FIFTEEN_MINUTES]:"15 Minutes",[fe.THIRTY_MINUTES]:"30 Minutes",[fe.ONE_HOUR]:"1 Hour",[fe.FOUR_HOURS]:"4 Hours",[fe.EIGHT_HOURS]:"8 Hours",[fe.ONE_DAY]:"1 Day"},qe={cardholderName:"Cardholder name",brand:"Brand",number:"Number",expMonth:"Expiration month",expYear:"Expiration year",code:"Security code (CVV)"},Je={title:"Title",firstName:"First name",middleName:"Middle name",lastName:"Last name",username:"Username",company:"Company",ssn:"Social Security number",passportNumber:"Passport number",licenseNumber:"License number",email:"Email",phone:"Phone",address1:"Address 1",address2:"Address 2",address3:"Address 3",city:"City / Town",state:"State / Province",postalCode:"Zip / Postal code",country:"Country"},Qe={1:"Login",3:"Card",4:"Identity",2:"Secure Note",5:"SSH Key"};function Hr(){let{serverUrl:e}=(0,pr.getPreferenceValues)();return!e||e==="bitwarden.com"||e==="https://bitwarden.com"?void 0:e}var ju={search:"transientCopySearch","generate-password":"transientCopyGeneratePassword","generate-password-quick":"transientCopyGeneratePasswordQuick"};function q(e){let t=ju[pr.environment.commandName],r=(0,pr.getPreferenceValues)()[t];return r==="never"?!1:r==="always"?!0:r==="passwords"?e==="password":!0}function Ps(e){return As[e]}var Re=class extends Error{constructor(t,r){super(t),this.stack=r}},Yt=class extends Re{constructor(t,r){super(t,r)}};var et=class extends Yt{constructor(t,r){super(t??"Bitwarden CLI not found",r),this.name="InstalledCLINotFoundError",this.stack=r}},kt=class extends Re{constructor(t,r){super(t??"Failed to load vault items",r),this.name="FailedToLoadVaultItemsError"}},Kr=class extends Yt{constructor(t,r){super(t??"Vault is locked",r),this.name="VaultIsLockedError"}},mr=class extends Re{constructor(t,r){super(t??"Not logged in",r),this.name="NotLoggedInError"}},Lt=class extends Yt{constructor(t,r){super(t??"Failed do download Bitwarden CLI",r),this.name="EnsureCliBinError"}},jr=class extends Re{constructor(t,r){super(t??"Premium status is required to use this feature",r),this.name="PremiumFeatureError"}},hr=class extends Re{constructor(t,r){super(t??"This Send has a is protected by a password",r),this.name="SendNeedsPasswordError"}},gr=class extends Re{constructor(t,r){super(t??"The password you entered is invalid",r),this.name="SendInvalidPasswordError"}};function Rt(e,t){try{return e()}catch{return t}}function Wn(e){if(e instanceof Yt)return e.message}var Yr=e=>{if(e){if(typeof e=="string")return e;if(e instanceof Error){let{message:t,name:r}=e;return e.stack?e.stack:`${r}: ${t}`}return String(e)}};var Ot=require("path"),Jt=require("fs/promises");var Be=require("fs"),qr=require("fs/promises"),Fs=require("path"),Ns=ne(_s());function Jr(e){return new Promise((t,r)=>{let n=setInterval(()=>{if(!(0,Be.existsSync)(e))return;(0,Be.statSync)(e).isFile()&&(clearInterval(n),t())},300);setTimeout(()=>{clearInterval(n),r(new Error(`File ${e} not found.`))},5e3)})}async function Ds(e,t){let r=new Ns.default.async({file:e});(0,Be.existsSync)(t)||(0,Be.mkdirSync)(t,{recursive:!0}),await r.extract(null,t),await r.close()}async function Us(e,t){let r=!1;try{let n=await(0,qr.readdir)(t);for await(let o of n)o.startsWith(e)&&await Rt(async()=>{await(0,qr.unlink)((0,Fs.join)(t,o)),r=!0})}catch{return!1}return r}function Vs(...e){for(let t of e)Rt(()=>(0,Be.unlinkSync)(t))}var qt=require("fs"),Ws=ne(require("http")),Hs=ne(require("https"));var Jn=require("@raycast/api");var Ms=require("@raycast/api"),Zu={logs:new Map,set:(e,t)=>{Xt.logs.set(new Date,{message:e,error:t})},clear:()=>Xt.logs.clear(),toString:()=>{let e="";return Xt.logs.forEach((t,r)=>{e.length>0&&(e+=`

`),e+=`[${r.toISOString()}] ${t.message}`,t.error&&(e+=`: ${Yr(t.error)}`)}),e}},Xt=Object.freeze(Zu),h=(e,t,r)=>{let{captureToRaycast:n=!1}=r??{},o=Array.isArray(e)?e.filter(Boolean).join(" "):e||"Captured exception";Xt.set(o,t),Jn.environment.isDevelopment?console.error(o,t):n&&(0,Ms.captureException)(t)},Bs=(...e)=>{Jn.environment.isDevelopment&&console.debug(...e)};var zs=require("fs"),Gs=require("crypto");function Qn(e){try{return(0,Gs.createHash)("sha256").update((0,zs.readFileSync)(e)).digest("hex")}catch{return null}}function eo(e,t,r){let{onProgress:n,sha256:o}=r??{};return new Promise((i,s)=>{let a=new URL(e),c=a.protocol==="https:"?Hs.default:Ws.default,l=0,f=c.get(a.href,b=>{if(b.statusCode&&b.statusCode>=300&&b.statusCode<400){f.destroy(),b.destroy();let E=b.headers.location;if(!E){s(new Error("Redirect response without location header"));return}if(++l>=10){s(new Error("Too many redirects"));return}eo(E,t,r).then(i).catch(s);return}if(b.statusCode!==200){s(new Error(`Response status ${b.statusCode}: ${b.statusMessage}`));return}let v=parseInt(b.headers["content-length"]||"0",10);if(v===0){s(new Error("Invalid file size"));return}let x=(0,qt.createWriteStream)(t,{autoClose:!0}),A=0,I=()=>{f.destroy(),b.destroy(),x.close()},g=E=>{I(),s(E)};b.on("data",E=>{A+=E.length;let k=Math.floor(A/v*100);n?.(k)}),x.on("finish",async()=>{try{await Jr(t),o&&await Xu(t,o),i()}catch(E){s(E)}finally{I()}}),x.on("error",E=>{h(`File stream error while downloading ${e}`,E),(0,qt.unlink)(t,()=>g(E))}),b.on("error",E=>{h(`Response error while downloading ${e}`,E),(0,qt.unlink)(t,()=>g(E))}),f.on("error",E=>{h(`Request error while downloading ${e}`,E),(0,qt.unlink)(t,()=>g(E))}),b.pipe(x)})})}function Xu(e,t){return new Promise((r,n)=>{let o=Qn(e);if(!o)return n(new Error(`Could not generate hash for file ${e}.`));if(o===t)return r();let i=setInterval(()=>{Qn(e)===t&&(clearInterval(i),r())},1e3);setTimeout(()=>{clearInterval(i),n(new Error(`Hash did not match, expected ${t.substring(0,7)}, got ${o.substring(0,7)}.`))},5e3)})}function Ks(e,t){return{...e,...t,file:t.file?{...e.file,...t.file}:e.file,text:t.text?{...e.text,...t.text}:e.text}}var js=require("@raycast/api"),pe=new js.Cache({namespace:"bw-cache"});var Z=process.platform==="darwin"?"macos":"windows";var{supportPath:$t}=X.environment,qu="4",Qr=(()=>{let e=(0,Ot.join)($t,`bw-bin-download-error-${qu}.log`);return{logError:t=>Rt(()=>(0,be.writeFileSync)(e,t?.message??"Unexpected error")),clearError:()=>Rt(()=>(0,be.unlinkSync)(e)),hasError:()=>Rt(()=>(0,be.existsSync)(e),!1)}})(),we={version:"2025.2.0",get sha256(){return Z==="windows"?"33a131017ac9c99d721e430a86e929383314d3f91c9f2fbf413d872565654c18":"fade51012a46011c016a2e5aee2f2e534c1ed078e49d1178a69e2889d2812a96"},downloadPage:"https://github.com/bitwarden/clients/releases",path:{get downloadedBin(){return(0,Ot.join)($t,we.binFilenameVersioned)},get installedBin(){return Z==="windows"?"C:\\ProgramData\\chocolatey\\bin\\bw.exe":process.arch==="arm64"?"/opt/homebrew/bin/bw":"/usr/local/bin/bw"},get bin(){return Qr.hasError()?this.installedBin:this.downloadedBin}},get binFilename(){return Z==="windows"?"bw.exe":"bw"},get binFilenameVersioned(){let e=`bw-${this.version}`;return Z==="windows"?`${e}.exe`:`${e}`},get downloadUrl(){let e="";return Z==="macos"&&(e=process.arch==="arm64"?"-arm64":""),`${this.downloadPage}/download/cli-v${this.version}/bw-${Z}${e}-${this.version}.zip`}},en=class{constructor(t){this.actionListeners=new Map;this.preferences=(0,X.getPreferenceValues)();this.wasCliUpdated=!1;this.showToast=async t=>{if(this.toastInstance){let r={message:this.toastInstance.message,title:this.toastInstance.title,primaryAction:this.toastInstance.primaryAction,secondaryAction:this.toastInstance.secondaryAction};return t.style&&(this.toastInstance.style=t.style),this.toastInstance.message=t.message,this.toastInstance.title=t.title,this.toastInstance.primaryAction=t.primaryAction,this.toastInstance.secondaryAction=t.secondaryAction,await this.toastInstance.show(),Object.assign(this.toastInstance,{restore:async()=>{await this.showToast(r)}})}else{let r=await(0,X.showToast)(t);return Object.assign(r,{restore:()=>r.hide()})}};let{cliPath:r,clientId:n,clientSecret:o,serverCertsPath:i}=this.preferences,s=Hr();this.toastInstance=t,this.cliPath=r||we.path.bin,this.env={BITWARDENCLI_APPDATA_DIR:$t,BW_CLIENTSECRET:o.trim(),BW_CLIENTID:n.trim(),PATH:(0,Ot.dirname)(process.execPath),...s&&i?{NODE_EXTRA_CA_CERTS:i}:{}},this.initPromise=(async()=>{await this.ensureCliBinary(),this.retrieveAndCacheCliVersion(),await this.checkServerUrl(s)})()}async ensureCliBinary(){if(this.checkCliBinIsReady(this.cliPath))return;if(this.cliPath===this.preferences.cliPath||this.cliPath===we.path.installedBin)throw new et(`Bitwarden CLI not found at ${this.cliPath}`);Qr.hasError()&&Qr.clearError();let t=await Us("bw-",$t),r=await this.showToast({title:`${t?"Updating":"Initializing"} Bitwarden CLI`,style:X.Toast.Style.Animated,primaryAction:{title:"Open Download Page",onAction:()=>(0,X.open)(we.downloadPage)}}),o=(0,Ot.join)($t,"bw.zip");try{try{r.message="Downloading...",await eo(we.downloadUrl,o,{onProgress:i=>r.message=`Downloading ${i}%`,sha256:we.sha256})}catch(i){throw r.title="Failed to download Bitwarden CLI",i}try{r.message="Extracting...",await Ds(o,$t);let i=(0,Ot.join)($t,we.binFilename);await(0,Jt.rename)(i,this.cliPath).catch(()=>null),await Jr(this.cliPath),await(0,Jt.chmod)(this.cliPath,"755"),await(0,Jt.rm)(o,{force:!0}),pe.set(ye.CLI_VERSION,we.version),this.wasCliUpdated=!0}catch(i){throw r.title="Failed to extract Bitwarden CLI",i}await r.hide()}catch(i){throw r.message=i instanceof Lt?i.message:"Please try again",r.style=X.Toast.Style.Failure,Vs(o,this.cliPath),X.environment.isDevelopment||Qr.logError(i),i instanceof Error?new Lt(i.message,i.stack):i}finally{await r.restore()}}async retrieveAndCacheCliVersion(){try{let{error:t,result:r}=await this.getVersion();t||pe.set(ye.CLI_VERSION,r)}catch(t){h("Failed to retrieve and cache cli version",t,{captureToRaycast:!0})}}checkCliBinIsReady(t){try{return(0,be.existsSync)(this.cliPath)?((0,be.accessSync)(t,be.constants.X_OK),!0):!1}catch{return(0,be.chmodSync)(t,"755"),!0}}setSessionToken(t){this.env={...this.env,BW_SESSION:t}}clearSessionToken(){delete this.env.BW_SESSION}withSession(t){return this.tempSessionToken=t,this}async initialize(){return await this.initPromise,this}async checkServerUrl(t){let r=await X.LocalStorage.getItem(V.SERVER_URL);if(!t||r===t)return;let n=await this.showToast({style:X.Toast.Style.Animated,title:"Switching server...",message:"Bitwarden server preference changed"});try{try{await this.logout()}catch{}await this.exec(["config","server",t||Ko],{resetVaultTimeout:!1}),await X.LocalStorage.setItem(V.SERVER_URL,t),n.style=X.Toast.Style.Success,n.title="Success",n.message="Bitwarden server changed"}catch(o){n.style=X.Toast.Style.Failure,n.title="Failed to switch server",o instanceof Error?n.message=o.message:n.message="Unknown error occurred"}finally{await n.restore()}}async exec(t,r){let{abortController:n,input:o="",resetVaultTimeout:i}=r??{},s=this.env;this.tempSessionToken&&(s={...s,BW_SESSION:this.tempSessionToken},this.tempSessionToken=void 0);let a=await Is(this.cliPath,t,{input:o,env:s,signal:n?.signal});if(this.isPromptWaitingForMasterPassword(a))throw await this.lock(),new Kr;return i&&await X.LocalStorage.setItem(V.LAST_ACTIVITY_TIME,new Date().toISOString()),a}async getVersion(){try{let{stdout:t}=await this.exec(["--version"],{resetVaultTimeout:!1});return{result:t}}catch(t){h("Failed to get cli version",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async login(){try{return await this.exec(["login","--apikey"],{resetVaultTimeout:!0}),await this.saveLastVaultStatus("login","unlocked"),await this.callActionListeners("login"),{result:void 0}}catch(t){h("Failed to login",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async logout(t){let{reason:r,immediate:n=!1}=t??{};try{return n&&await this.handlePostLogout(r),await this.exec(["logout"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("logout","unauthenticated"),n||await this.handlePostLogout(r),{result:void 0}}catch(o){h("Failed to logout",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async lock(t){let{reason:r,checkVaultStatus:n=!1,immediate:o=!1}=t??{};try{if(o&&await this.callActionListeners("lock",r),n){let{error:i,result:s}=await this.status();if(i)throw i;if(s.status==="unauthenticated")return{error:new mr("Not logged in")}}return await this.exec(["lock"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("lock","locked"),o||await this.callActionListeners("lock",r),{result:void 0}}catch(i){h("Failed to lock vault",i);let{error:s}=await this.handleCommonErrors(i);if(!s)throw i;return{error:s}}}async unlock(t){try{let{stdout:r}=await this.exec(["unlock",t,"--raw"],{resetVaultTimeout:!0});return this.setSessionToken(r),await this.saveLastVaultStatus("unlock","unlocked"),await this.callActionListeners("unlock",t,r),{result:r}}catch(r){h("Failed to unlock vault",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async sync(){try{return await this.exec(["sync"],{resetVaultTimeout:!0}),{result:void 0}}catch(t){h("Failed to sync vault",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async getItem(t){try{let{stdout:r}=await this.exec(["get","item",t],{resetVaultTimeout:!0});return{result:JSON.parse(r)}}catch(r){h("Failed to get item",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async listItems(){try{let{stdout:t}=await this.exec(["list","items"],{resetVaultTimeout:!0});return{result:JSON.parse(t).filter(n=>!!n.name)}}catch(t){h("Failed to list items",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async createLoginItem(t){try{let{error:r,result:n}=await this.getTemplate("item");if(r)throw r;let{error:o,result:i}=await this.getTemplate("item.login");if(o)throw o;n.name=t.name,n.type=1,n.folderId=t.folderId||null,n.login=i,n.notes=null,i.username=t.username||null,i.password=t.password,i.totp=null,i.fido2Credentials=void 0,t.uri&&(i.uris=[{match:null,uri:t.uri}]);let{result:s,error:a}=await this.encode(JSON.stringify(n));if(a)throw a;let{stdout:c}=await this.exec(["create","item",s],{resetVaultTimeout:!0});return{result:JSON.parse(c)}}catch(r){h("Failed to create login item",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async listFolders(){try{let{stdout:t}=await this.exec(["list","folders"],{resetVaultTimeout:!0});return{result:JSON.parse(t)}}catch(t){h("Failed to list folder",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async createFolder(t){try{let{error:r,result:n}=await this.getTemplate("folder");if(r)throw r;n.name=t;let{result:o,error:i}=await this.encode(JSON.stringify(n));if(i)throw i;return await this.exec(["create","folder",o],{resetVaultTimeout:!0}),{result:void 0}}catch(r){h("Failed to create folder",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async getTotp(t){try{let{stdout:r}=await this.exec(["get","totp",t],{resetVaultTimeout:!0});return{result:r}}catch(r){h("Failed to get TOTP",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async status(){try{let{stdout:t}=await this.exec(["status"],{resetVaultTimeout:!1});return{result:JSON.parse(t)}}catch(t){h("Failed to get status",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async checkLockStatus(){try{return await this.exec(["unlock","--check"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("checkLockStatus","unlocked"),"unlocked"}catch(t){return h("Failed to check lock status",t),t.stderr==="Vault is locked."?(await this.saveLastVaultStatus("checkLockStatus","locked"),"locked"):(await this.saveLastVaultStatus("checkLockStatus","unauthenticated"),"unauthenticated")}}async getTemplate(t){try{let{stdout:r}=await this.exec(["get","template",t],{resetVaultTimeout:!0});return{result:JSON.parse(r)}}catch(r){h("Failed to get template",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async encode(t){try{let{stdout:r}=await this.exec(["encode"],{input:t,resetVaultTimeout:!1});return{result:r}}catch(r){h("Failed to encode",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async generatePassword(t,r){let n=t?Ts(t):[],{stdout:o}=await this.exec(["generate",...n],{abortController:r,resetVaultTimeout:!1});return o}async listSends(){try{let{stdout:t}=await this.exec(["send","list"],{resetVaultTimeout:!0});return{result:JSON.parse(t)}}catch(t){h("Failed to list sends",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async createSend(t){try{let{error:r,result:n}=await this.getTemplate(t.type===0?"send.text":"send.file");if(r)throw r;let o=Ks(n,t),{result:i,error:s}=await this.encode(JSON.stringify(o));if(s)throw s;let{stdout:a}=await this.exec(["send","create",i],{resetVaultTimeout:!0});return{result:JSON.parse(a)}}catch(r){h("Failed to create send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async editSend(t){try{let{result:r,error:n}=await this.encode(JSON.stringify(t));if(n)throw n;let{stdout:o}=await this.exec(["send","edit",r],{resetVaultTimeout:!0});return{result:JSON.parse(o)}}catch(r){h("Failed to delete send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async deleteSend(t){try{return await this.exec(["send","delete",t],{resetVaultTimeout:!0}),{result:void 0}}catch(r){h("Failed to delete send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async removeSendPassword(t){try{return await this.exec(["send","remove-password",t],{resetVaultTimeout:!0}),{result:void 0}}catch(r){h("Failed to remove send password",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async receiveSendInfo(t,r){try{let{stdout:n,stderr:o}=await this.exec(["send","receive",t,"--obj"],{resetVaultTimeout:!0,input:r?.password});return!n&&/Invalid password/i.test(o)?{error:new gr}:!n&&/Send password/i.test(o)?{error:new hr}:{result:JSON.parse(n)}}catch(n){let o=n.stderr;if(/Invalid password/gi.test(o))return{error:new gr};if(/Send password/gi.test(o))return{error:new hr};h("Failed to receive send obj",n);let{error:i}=await this.handleCommonErrors(n);if(!i)throw n;return{error:i}}}async receiveSend(t,r){try{let{savePath:n,password:o}=r??{},i=["send","receive",t];n&&i.push("--output",n);let{stdout:s}=await this.exec(i,{resetVaultTimeout:!0,input:o});return{result:s}}catch(n){h("Failed to receive send",n);let{error:o}=await this.handleCommonErrors(n);if(!o)throw n;return{error:o}}}async saveLastVaultStatus(t,r){await X.LocalStorage.setItem(V.VAULT_LAST_STATUS,r)}async getLastSavedVaultStatus(){let t=await X.LocalStorage.getItem(V.VAULT_LAST_STATUS);return t||(await this.status()).result?.status}isPromptWaitingForMasterPassword(t){return!!(t.stderr&&t.stderr.includes("Master password"))}async handlePostLogout(t){this.clearSessionToken(),await this.callActionListeners("logout",t)}async handleCommonErrors(t){let r=t.stderr;return r?/not logged in/i.test(r)?(await this.handlePostLogout(),{error:new mr("Not logged in")}):/Premium status/i.test(r)?{error:new jr}:{}:{}}setActionListener(t,r){let n=this.actionListeners.get(t);return n&&n.size>0?n.add(r):this.actionListeners.set(t,new Set([r])),this}removeActionListener(t,r){let n=this.actionListeners.get(t);return n&&n.size>0&&n.delete(r),this}async callActionListeners(t,...r){let n=this.actionListeners.get(t);if(n&&n.size>0)for(let o of n)try{await o?.(...r)}catch(i){h(`Error calling bitwarden action listener for ${t}`,i)}}};var Ys=require("@raycast/api"),Xs=require("react/jsx-runtime"),Zs=()=>(0,Xs.jsx)(Ys.Form,{isLoading:!0});var tn=require("react");function Ju(e,t){let r=(0,tn.useRef)(!1);(0,tn.useEffect)(()=>{r.current||t!==void 0&&!t||(r.current=!0,e())},[t])}var $e=Ju;var rn=require("react/jsx-runtime"),qs=(0,_t.createContext)(null),Js=({children:e,loadingFallback:t=(0,rn.jsx)(Zs,{})})=>{let[r,n]=(0,_t.useState)(),[o,i]=(0,_t.useState)();$e(()=>{new en().initialize().then(n).catch(s)});function s(a){if(a instanceof et)i(a);else throw a}return o?(0,rn.jsx)(yr,{error:o}):r?(0,rn.jsx)(qs.Provider,{value:r,children:e}):t},ue=()=>{let e=(0,_t.useContext)(qs);if(e==null)throw new Error("useBitwarden must be used within a BitwardenProvider");return e};function Qs(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function ea(e,t){try{let r=e,n;return r?.stderr?n=r.stderr:e instanceof Error?n=`${e.name}: ${e.message}`:Qs(e)?n=JSON.stringify(e):n=`${e}`,n?t?.omitSensitiveValue?Qu(n,t.omitSensitiveValue):n:""}catch{return""}}function Qu(e,t){return e.replace(new RegExp(t,"i"),"[REDACTED]")}var Oe=require("@raycast/api"),nn=require("react");function ed(){let e=ue(),[t,r]=(0,nn.useState)(null);(0,nn.useEffect)(()=>{e.status().then(({error:s,result:a})=>{s||r(a)}).catch(()=>{})},[]);let n=!!Hr(),o="...",i="...";if(t){let{status:s,userEmail:a,serverUrl:c}=t;o=s=="unauthenticated"?"\u274C Logged out":`\u{1F512} Locked (${a})`,c?i=c||"":(!c&&n||c&&!n)&&(0,Oe.confirmAlert)({icon:Oe.Icon.ExclamationMark,title:"Restart Required",message:"Bitwarden server URL preference has been changed since the extension was opened.",primaryAction:{title:"Close Extension"},dismissAction:{title:"Close Raycast",style:Oe.Alert.ActionStyle.Cancel}}).then(l=>{l?(0,Oe.popToRoot)():(0,Oe.closeMainWindow)()})}return{userMessage:o,serverMessage:i,shouldShowServer:n}}var ta=ed;var an=require("@raycast/api");var M=ne(require("react")),B=require("@raycast/api");var ra=Object.prototype.hasOwnProperty;function on(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&on(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(ra.call(e,r)&&++n&&!ra.call(t,r)||!(r in t)||!on(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var Ft=ne(require("node:fs")),sn=ne(require("node:path"));var ia=require("react/jsx-runtime");function td(e){let t=(0,M.useRef)(e),r=(0,M.useRef)(0);return on(e,t.current)||(t.current=e,r.current+=1),(0,M.useMemo)(()=>t.current,[r.current])}function Te(e){let t=(0,M.useRef)(e);return t.current=e,t}function rd(e,t){let r=e instanceof Error?e.message:String(e);return(0,B.showToast)({style:B.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??na(e),secondaryAction:t?.primaryAction?na(e):void 0})}var na=e=>{let t=!0,r="[Extension Name]...",n="";try{let s=JSON.parse((0,Ft.readFileSync)((0,sn.join)(B.environment.assetsPath,"..","package.json"),"utf8"));r=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(t=!1)}catch{}let o=B.environment.isDevelopment||t,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:o?"Copy Logs":"Report Error",onAction(s){s.hide(),o?B.Clipboard.copy(i):(0,B.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function sa(e,t,r){let n=(0,M.useRef)(0),[o,i]=(0,M.useState)({isLoading:!0}),s=Te(e),a=Te(r?.abortable),c=Te(t||[]),l=Te(r?.onError),f=Te(r?.onData),b=Te(r?.onWillExecute),v=Te(r?.failureToastOptions),x=Te(o.data),A=(0,M.useRef)(null),I=(0,M.useRef)({page:0}),g=(0,M.useRef)(!1),E=(0,M.useRef)(!0),k=(0,M.useRef)(50),L=(0,M.useCallback)(()=>(a.current&&(a.current.current?.abort(),a.current.current=new AbortController),++n.current),[a]),D=(0,M.useCallback)((...le)=>{let re=L();b.current?.(le),i(p=>({...p,isLoading:!0}));let d=nd(s.current)(...le);function y(p){return p.name=="AbortError"||re===n.current&&(l.current?l.current(p):B.environment.launchType!==B.LaunchType.Background&&rd(p,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(w){w.hide(),A.current?.(...c.current||[])}},...v.current}),i({error:p,isLoading:!1})),p}return typeof d=="function"?(g.current=!0,d(I.current).then(({data:p,hasMore:w,cursor:R})=>(re===n.current&&(I.current&&(I.current.cursor=R,I.current.lastItem=p?.[p.length-1]),f.current&&f.current(p,I.current),w&&(k.current=p.length),E.current=w,i(P=>I.current.page===0?{data:p,isLoading:!1}:{data:(P.data||[])?.concat(p),isLoading:!1})),p),p=>(E.current=!1,y(p)))):(g.current=!1,d.then(p=>(re===n.current&&(f.current&&f.current(p),i({data:p,isLoading:!1})),p),y))},[f,l,c,s,i,A,b,I,v,L]);A.current=D;let N=(0,M.useCallback)(()=>{I.current={page:0};let le=c.current||[];return D(...le)},[D,c]),K=(0,M.useCallback)(async(le,re)=>{let d;try{if(re?.optimisticUpdate){L(),typeof re?.rollbackOnError!="function"&&re?.rollbackOnError!==!1&&(d=structuredClone(x.current?.value));let y=re.optimisticUpdate;i(p=>({...p,data:y(p.data)}))}return await le}catch(y){if(typeof re?.rollbackOnError=="function"){let p=re.rollbackOnError;i(w=>({...w,data:p(w.data)}))}else re?.optimisticUpdate&&re?.rollbackOnError!==!1&&i(p=>({...p,data:d}));throw y}finally{re?.shouldRevalidateAfter!==!1&&(B.environment.launchType===B.LaunchType.Background||B.environment.commandMode==="menu-bar"?await N():N())}},[N,x,i,L]),Ce=(0,M.useCallback)(()=>{I.current.page+=1;let le=c.current||[];D(...le)},[I,c,D]);(0,M.useEffect)(()=>{I.current={page:0},r?.execute!==!1?D(...t||[]):L()},[td([t,r?.execute,D]),a,I]),(0,M.useEffect)(()=>()=>{L()},[L]);let je=r?.execute!==!1?o.isLoading:!1,Ye={...o,isLoading:je},xt=g.current?{pageSize:k.current,hasMore:E.current,onLoadMore:Ce}:void 0;return{...Ye,revalidate:N,mutate:K,pagination:xt}}function nd(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function od(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function id(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}var sd=Symbol("cache without namespace"),oa=new Map;function aa(e,t,r){let n=r?.cacheNamespace||sd,o=oa.get(n)||oa.set(n,new B.Cache({namespace:r?.cacheNamespace})).get(n);if(!o)throw new Error("Missing cache");let i=Te(e),s=Te(t),a=(0,M.useSyncExternalStore)(o.subscribe,()=>{try{return o.get(i.current)}catch(b){console.error("Could not get Cache data:",b);return}}),c=(0,M.useMemo)(()=>{if(typeof a<"u"){if(a==="undefined")return;try{return JSON.parse(a,id)}catch(b){return console.warn("The cached data is corrupted",b),s.current}}else return s.current},[a,s]),l=Te(c),f=(0,M.useCallback)(b=>{let v=typeof b=="function"?b(l.current):b;if(typeof v>"u")o.set(i.current,"undefined");else{let x=JSON.stringify(v,od);o.set(i.current,x)}return v},[o,i,l]);return[c,f]}function ca(e,t){let{data:r,revalidate:n,isLoading:o}=sa(()=>an.LocalStorage.getItem(e));return[r??t,{isLoading:o,set:async a=>{await an.LocalStorage.setItem(e,a),await n()},remove:async()=>{await an.LocalStorage.removeItem(e),await n()}}]}var J=require("react/jsx-runtime"),ad=({pendingAction:e=Promise.resolve()})=>{let t=ue(),{userMessage:r,serverMessage:n,shouldShowServer:o}=ta(),[i,s]=(0,wr.useState)(!1),[a,c]=(0,wr.useState)(void 0),[l,f]=(0,wr.useState)(!1),[b,v]=(0,wr.useState)(""),[x,{remove:A}]=ca(V.VAULT_LOCK_REASON);async function I(){if(b.length===0)return;let L=await(0,$.showToast)($.Toast.Style.Animated,"Unlocking Vault...","Please wait");try{s(!0),c(void 0),await e;let{error:D,result:N}=await t.status();if(D)throw D;if(N.status==="unauthenticated")try{let{error:K}=await t.login();if(K)throw K}catch(K){let{displayableError:Ce=`Please check your ${o?"Server URL, ":""}API Key and Secret.`,treatedError:je}=la(K,b);await(0,$.showToast)($.Toast.Style.Failure,"Failed to log in",Ce),c(je),h("Failed to log in",K);return}await t.unlock(b),await A(),await L.hide()}catch(D){let{displayableError:N="Please check your credentials",treatedError:K}=la(D,b);await(0,$.showToast)($.Toast.Style.Failure,"Failed to unlock vault",N),c(K),h("Failed to unlock vault",D)}finally{s(!1)}}let g=async()=>{a&&(await $.Clipboard.copy(a),await(0,$.showToast)($.Toast.Style.Success,"Error copied to clipboard"))},E=$.Form.PasswordField,k="password";return l&&(E=$.Form.TextField,k="plainPassword"),(0,J.jsxs)($.Form,{actions:(0,J.jsxs)($.ActionPanel,{children:[!i&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)($.Action.SubmitForm,{icon:$.Icon.LockUnlocked,title:"Unlock",onSubmit:I}),(0,J.jsx)($.Action,{icon:l?$.Icon.EyeDisabled:$.Icon.Eye,title:l?"Hide Password":"Show Password",onAction:()=>f(L=>!L),shortcut:{macOS:{key:"e",modifiers:["opt"]},windows:{key:"e",modifiers:["alt"]}}})]}),!!a&&(0,J.jsx)($.Action,{onAction:g,title:"Copy Last Error",icon:$.Icon.Bug,style:$.Action.Style.Destructive}),(0,J.jsx)(br,{})]}),children:[o&&(0,J.jsx)($.Form.Description,{title:"Server URL",text:n}),(0,J.jsx)($.Form.Description,{title:"Vault Status",text:r}),(0,J.jsx)(E,{id:k,title:"Master Password",value:b,onChange:v,ref:L=>L?.focus()}),(0,J.jsx)($.Form.Description,{title:"",text:`Press ${Z==="macos"?"\u2325":"Alt"}+E to ${l?"hide":"show"} password`}),!!x&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)($.Form.Description,{title:"\u2139\uFE0F",text:x}),(0,J.jsx)(cd,{})]})]})};function cd(){let e=(0,$.getPreferenceValues)().repromptIgnoreDuration,t=Ps(e);return t?(0,J.jsx)($.Form.Description,{title:"",text:`Timeout is set to ${t}, this can be configured in the extension settings`}):null}function la(e,t){let r=ea(e,{omitSensitiveValue:t}),n;return/Invalid master password/i.test(r)?n="Invalid master password":/Invalid API Key/i.test(r)&&(n="Invalid Client ID or Secret"),{displayableError:n,treatedError:r}}var ua=ad;var da=require("@raycast/api"),fa=require("react/jsx-runtime"),Qt=()=>(0,fa.jsx)(da.List,{searchBarPlaceholder:"Search vault",isLoading:!0});var pa=require("react"),ld={token:void 0,passwordHash:void 0,isLoading:!0,isLocked:!1,isAuthenticated:!1},ma=()=>(0,pa.useReducer)((e,t)=>{switch(t.type){case"loadState":{let{type:r,...n}=t;return{...e,...n}}case"lock":return{...e,token:void 0,passwordHash:void 0,isLoading:!1,isLocked:!0};case"unlock":return{...e,token:t.token,passwordHash:t.passwordHash,isLocked:!1,isAuthenticated:!0};case"logout":return{...e,token:void 0,passwordHash:void 0,isLocked:!0,isAuthenticated:!1,isLoading:!1};case"vaultTimeout":return{...e,isLocked:!0};case"finishLoadingSavedState":{if(!e.token||!e.passwordHash)throw new Error("Missing required fields: token, passwordHash");let r=!!e.token;return{...e,isLoading:!1,isLocked:!r,isAuthenticated:r}}case"failLoadingSavedState":return{...e,isLoading:!1,isLocked:!0};default:return e}},ld);var ve=require("@raycast/api");var ha=require("child_process"),ga=require("util");var ud=(0,ga.promisify)(ha.exec),Sr={getSavedSession:()=>Promise.all([ve.LocalStorage.getItem(V.SESSION_TOKEN),ve.LocalStorage.getItem(V.REPROMPT_HASH),ve.LocalStorage.getItem(V.LAST_ACTIVITY_TIME),ve.LocalStorage.getItem(V.VAULT_LAST_STATUS)]),clearSession:async()=>{await Promise.all([ve.LocalStorage.removeItem(V.SESSION_TOKEN),ve.LocalStorage.removeItem(V.REPROMPT_HASH)])},saveSession:async(e,t)=>{await Promise.all([ve.LocalStorage.setItem(V.SESSION_TOKEN,e),ve.LocalStorage.setItem(V.REPROMPT_HASH,t)])},logoutClearSession:async()=>{await Promise.all([ve.LocalStorage.removeItem(V.SESSION_TOKEN),ve.LocalStorage.removeItem(V.REPROMPT_HASH),ve.LocalStorage.removeItem(V.LAST_ACTIVITY_TIME)])}},ya=e=>Sa(e,t=>ba(t,"handleUnlockResult")),wa=e=>Sa(e,t=>ba(t,"sleep 0"));function ba(e,t){return ud(`log show --style syslog --predicate "process == 'loginwindow'" --info --last ${e}h | grep "${t}" | tail -n 1`)}async function Sa(e,t){let r=await Ea(t);return r?new Date(r).getTime()>e.getTime():!0}var dd=2,fd=5;async function Ea(e,t=1,r=0){try{if(r>fd){Bs("Max retry attempts reached to get last screen lock time");return}let{stdout:n,stderr:o}=await e(t),[i,s]=n?.split(" ")??[];if(o||!i||!s)return Ea(e,t+dd,r+1);let a=new Date(`${i}T${s}`);return!a||a.toString()==="Invalid Date"?void 0:a}catch(n){h("Failed to get last screen lock time",n);return}}var cn=require("react/jsx-runtime"),xa=(0,st.createContext)(null);function to(e){let{children:t,loadingFallback:r=(0,cn.jsx)(Qt,{}),unlock:n}=e,o=ue(),[i,s]=ma(),a=(0,st.useRef)(Promise.resolve());$e(c,o);async function c(){try{o.setActionListener("lock",f).setActionListener("unlock",l).setActionListener("logout",b);let[g,E,k,L]=await Sr.getSavedSession();if(!g||!E)throw new it;if(s({type:"loadState",token:g,passwordHash:E}),o.setSessionToken(g),o.wasCliUpdated)throw new Er(Ct.CLI_UPDATED);if(L==="locked")throw new it;if(L==="unauthenticated")throw new Er;if(k){let D=new Date(k),N=+(0,er.getPreferenceValues)().repromptIgnoreDuration;if(Z==="macos"&&N===fe.SYSTEM_LOCK){if(await ya(D))throw new it(Ct.SYSTEM_LOCK)}else if(Z==="macos"&&N===fe.SYSTEM_SLEEP){if(await wa(D))throw new it(Ct.SYSTEM_SLEEP)}else if(N!==fe.NEVER){let K=Date.now()-D.getTime();if(N===fe.IMMEDIATELY||K>=N)throw new it(Ct.TIMEOUT)}}s({type:"finishLoadingSavedState"})}catch(g){g instanceof it?a.current=o.lock({reason:g.message,immediate:!0,checkVaultStatus:!0}):g instanceof Er?a.current=o.logout({reason:g.message,immediate:!0}):(a.current=o.lock({immediate:!0}),s({type:"failLoadingSavedState"}),h("Failed to bootstrap session state",g))}}async function l(g,E){let k=await Gn(g);await Sr.saveSession(E,k),await er.LocalStorage.removeItem(V.VAULT_LOCK_REASON),s({type:"unlock",token:E,passwordHash:k})}async function f(g){await Sr.clearSession(),g&&await er.LocalStorage.setItem(V.VAULT_LOCK_REASON,g),s({type:"lock"})}async function b(g){await Sr.clearSession(),pe.clear(),g&&await er.LocalStorage.setItem(V.VAULT_LOCK_REASON,g),s({type:"logout"})}async function v(g){return await Gn(g)===i.passwordHash}let x=(0,st.useMemo)(()=>({token:i.token,isLoading:i.isLoading,isAuthenticated:i.isAuthenticated,isLocked:i.isLocked,active:!i.isLoading&&i.isAuthenticated&&!i.isLocked,confirmMasterPassword:v}),[i,v]);if(i.isLoading)return r;let A=i.isLocked||!i.isAuthenticated,I=i.token?t:null;return(0,cn.jsx)(xa.Provider,{value:x,children:A&&n?(0,cn.jsx)(ua,{pendingAction:a.current}):I})}function ln(){let e=(0,st.useContext)(xa);if(e==null)throw new Error("useSession must be used within a SessionProvider");return e}var it=class extends Error{constructor(t){super(t)}},Er=class extends Error{constructor(t){super(t)}};var va=require("react/jsx-runtime");function pd(e,t){let{description:r="Performing an action that requires the master password"}=t??{},n=ln(),{push:o,pop:i}=(0,tr.useNavigation)();async function s(a){if(!await n.confirmMasterPassword(a)){await(0,tr.showToast)(tr.Toast.Style.Failure,"Failed to unlock vault","Check your credentials");return}i(),setTimeout(e,1)}return()=>o((0,va.jsx)(Ho,{description:r,onConfirm:s}))}var Ia=pd;var Ta=require("react/jsx-runtime");function md(e){let{repromptDescription:t,onAction:r,...n}=e,{reprompt:o}=O(),i=Ia(r,{description:t});return(0,Ta.jsx)(Ca.Action,{...n,onAction:o?i:r})}var Y=md;var ie=require("@raycast/api");var Aa=require("child_process"),Pa=require("util");var ro=require("fs"),ka=require("path");var La=require("react/jsx-runtime"),hd=(0,Pa.promisify)(Aa.exec),{supportPath:gd}=ie.environment,yd=()=>{let{clientId:e,clientSecret:t,fetchFavicons:r,generatePasswordQuickAction:n,repromptIgnoreDuration:o,serverCertsPath:i,serverUrl:s,shouldCacheVaultItems:a,transientCopyGeneratePassword:c,transientCopyGeneratePasswordQuick:l,transientCopySearch:f,windowActionOnCopy:b}=(0,ie.getPreferenceValues)();return{has_clientId:!!e,has_clientSecret:!!t,fetchFavicons:r,generatePasswordQuickAction:n,repromptIgnoreDuration:o,has_serverCertsPath:!!i,has_serverUrl:!!s,shouldCacheVaultItems:a,transientCopyGeneratePassword:c,transientCopyGeneratePasswordQuick:l,transientCopySearch:f,windowActionOnCopy:b}},me="N/A",at=async(e,t=!0)=>{try{let r=e;Z==="windows"?r=`powershell -Command "${e}"`:r=`PATH="$PATH:${(0,ka.dirname)(process.execPath)}" ${e}`;let{stdout:n}=await hd(r,{env:{BITWARDENCLI_APPDATA_DIR:gd}}),o=n.trim();return t?o.replace(/\n|\r/g,""):o}catch(r){return h(`Failed to execute command: ${e}`,r),me}},wd=()=>{try{let e=(0,ie.getPreferenceValues)().cliPath;return e?{type:"custom",path:e}:we.path.bin===we.path.downloadedBin?{type:"downloaded",path:we.path.downloadedBin}:{type:"installed",path:we.path.installedBin}}catch{return{type:me,path:me}}},bd=async()=>{try{let e="/opt/homebrew/bin/brew";if((0,ro.existsSync)(e)||(e="/usr/local/bin/brew"),!(0,ro.existsSync)(e))return{arch:me,version:me};let t=await at(`${e} config`,!1);if(t===me)return{arch:me,version:me};let r=/HOMEBREW_PREFIX: (.+)/.exec(t)?.[1]||me,n=/HOMEBREW_VERSION: (.+)/.exec(t)?.[1]||me;return{arch:r!==me?r.includes("/opt/homebrew")?"arm64":"x86_64":me,version:n}}catch{return{arch:me,version:me}}};function Sd(){let e=async()=>{let t=await(0,ie.showToast)(ie.Toast.Style.Animated,"Collecting data...");try{let r=yd(),n=wd(),[o,i,s,a]=await Promise.all([...Z==="macos"?[at("uname -m"),at("sw_vers -productVersion"),at("sw_vers -buildVersion")]:[at("(Get-CimInstance Win32_OperatingSystem).OSArchitecture"),at("(Get-CimInstance Win32_OperatingSystem).Caption"),at("(Get-CimInstance Win32_OperatingSystem).Version")],at(`${n.path} --version`)]),c={raycast:{version:ie.environment.raycastVersion},system:{arch:o,version:i,buildVersion:s},node:{arch:process.arch,version:process.version},cli:{type:n.type,version:a},preferences:r};if(Z==="macos"){let l=await bd();c.homebrew={arch:l.arch,version:l.version}}await ie.Clipboard.copy(JSON.stringify(c,null,2)),t.style=ie.Toast.Style.Success,t.title="Data copied to clipboard"}catch(r){t.style=ie.Toast.Style.Failure,t.title="Failed to collect bug report data",h("Failed to collect bug report data",r)}};return(0,La.jsx)(ie.Action,{title:"Collect Bug Report Data",icon:ie.Icon.Bug,onAction:e})}var xr=Sd;var Ra=require("@raycast/api"),$a=require("react/jsx-runtime"),no="https://github.com/raycast/extensions/issues/new?assignees=&labels=extension%2Cbug&template=extension_bug_report.yml&title=%5BBitwarden%5D+...";function Ed(){return(0,$a.jsx)(Ra.Action.OpenInBrowser,{title:"Open Bug Report",url:no})}var Ir=Ed;var ae=require("@raycast/api");var Oa=require("react/jsx-runtime");function xd(){return(0,Oa.jsx)(ae.Action,{onAction:async()=>{let t=Xt.toString();if(t.length===0)return(0,ae.showToast)(ae.Toast.Style.Success,"No errors to copy");await ae.Clipboard.copy(t),await(0,ae.showToast)(ae.Toast.Style.Success,"Errors copied to clipboard"),await(0,ae.confirmAlert)({title:"Be careful with this information",message:"Please be mindful of where you share this error log, as it may contain sensitive information. Always analyze it before sharing.",primaryAction:{title:"Got it",style:ae.Alert.ActionStyle.Default}})},title:"Copy Last Errors",icon:ae.Icon.CopyClipboard,style:ae.Action.Style.Regular})}var oo=xd;var Na=require("@raycast/api");var _a=require("react");var Id=()=>{let e=pe.get(ye.CLI_VERSION);return e?parseFloat(e):-1},Fa=()=>{let[e,t]=(0,_a.useState)(Id);return $e(()=>{pe.subscribe((r,n)=>{n&&r===ye.CLI_VERSION&&t(parseFloat(n)||-1)})}),e};var rr=require("react/jsx-runtime");function br(){let e=Fa();return(0,rr.jsxs)(Na.ActionPanel.Section,{title:`Debugging & Bug Reporting (CLI v${e})`,children:[(0,rr.jsx)(oo,{}),(0,rr.jsx)(Ir,{}),(0,rr.jsx)(xr,{})]})}var te=require("@raycast/api");var Ge=require("@raycast/api"),lt=require("react");var ze=require("react");var Ma=require("react/jsx-runtime"),so=(0,ze.createContext)(null),vd=({children:e})=>{let t=(0,ze.useRef)(new Map),r=i=>{i instanceof kt?t.current.forEach(s=>s(i)):t.current.forEach((s,a)=>{let c=i.find(l=>l.id===a);c&&s(c)})},n=(i,s)=>(t.current.set(i,s),()=>{t.current.delete(i)}),o=(0,ze.useMemo)(()=>({listeners:t,publishItems:r,subscribeItem:n}),[]);return(0,Ma.jsx)(so.Provider,{value:o,children:e})},Da=()=>{let e=(0,ze.useContext)(so);if(e==null)throw new Error("useVaultItemPublisher must be used within a VaultListenersProvider");return e.publishItems},Ua=()=>{let e=(0,ze.useContext)(so);if(e==null)throw new Error("useVaultItemSubscriber must be used within a VaultListenersProvider");return t=>{let r;return new Promise((n,o)=>{let i=e.subscribeItem(t,s=>{try{if(i(),s instanceof kt)throw s;n(s),clearTimeout(r)}catch(a){o(a)}});r=setTimeout(()=>{i(),o(new io)},15e3)})}},io=class extends Error{constructor(){super("Timed out waiting for item"),this.name="SubscriberTimeoutError"}},Va=vd;var ja=require("@raycast/api");function Ba(e){return e.map(t=>({object:t.object,id:t.id,organizationId:t.organizationId,folderId:t.folderId,type:t.type,name:t.name,revisionDate:t.revisionDate,creationDate:t.creationDate,deletedDate:t.deletedDate,favorite:t.favorite,reprompt:t.reprompt,collectionIds:t.collectionIds,secureNote:t.secureNote?{type:t.secureNote.type}:void 0,fields:Cd(t.fields),login:Td(t.login),identity:Ad(t.identity),card:Pd(t.card),passwordHistory:kd(t.passwordHistory),notes:F(t.notes),sshKey:Ld(t.sshKey)}))}function za(e){return e.map(t=>({object:t.object,id:t.id,name:t.name}))}function Cd(e){return e?.map(t=>({name:t.name,value:F(t.value),type:t.type,linkedId:t.linkedId}))}function Td(e){if(e)return{username:e.username,uris:e.uris,password:F(e.password),passwordRevisionDate:F(e.passwordRevisionDate),totp:F(e.totp)}}function Ad(e){if(e)return{title:F(e.title),firstName:F(e.firstName),middleName:F(e.middleName),lastName:F(e.lastName),address1:F(e.address1),address2:F(e.address2),address3:F(e.address3),city:F(e.city),state:F(e.state),postalCode:F(e.postalCode),country:F(e.country),company:F(e.company),email:F(e.email),phone:F(e.phone),ssn:F(e.ssn),username:F(e.username),passportNumber:F(e.passportNumber),licenseNumber:F(e.licenseNumber)}}function Pd(e){if(e)return{brand:e.brand,cardholderName:F(e.cardholderName),number:F(e.number),expMonth:F(e.expMonth),expYear:F(e.expYear),code:F(e.code)}}function kd(e){return e?.map(t=>({password:F(t.password),lastUsedDate:F(t.lastUsedDate)}))}function Ld(e){if(e)return{publicKey:e.publicKey,keyFingerprint:e.keyFingerprint,privateKey:F(e.privateKey)}}function F(e){return e&&cr}var Wa=require("@raycast/api"),ct=require("crypto"),Ha=require("react"),Ga="aes-256-cbc";function Ka(){let{clientSecret:e}=(0,Wa.getPreferenceValues)(),t=(0,Ha.useMemo)(()=>Rd(e.trim()),[e]);return{encrypt:o=>{let i=(0,ct.randomBytes)(16),s=(0,ct.createCipheriv)(Ga,t,i),a=Buffer.concat([s.update(o),s.final()]);return{iv:i.toString("hex"),content:a.toString("hex")}},decrypt:(o,i)=>{let s=(0,ct.createDecipheriv)(Ga,t,Buffer.from(i,"hex"));return Buffer.concat([s.update(Buffer.from(o,"hex")),s.final()]).toString()}}}function Rd(e){return Buffer.from((0,ct.createHash)("sha256").update(e).digest("base64").slice(0,32))}function $d(){let{encrypt:e,decrypt:t}=Ka(),r=(0,ja.getPreferenceValues)().shouldCacheVaultItems;return $e(()=>{pe.isEmpty||pe.clear()},!r),{getCachedVault:()=>{try{if(!r)throw new Nt;let i=pe.get(ye.IV),s=pe.get(ye.VAULT);if(!i||!s)throw new Nt;let a=t(s,i);return JSON.parse(a)}catch(i){return i instanceof Nt||h("Failed to decrypt cached vault",i),{items:[],folders:[]}}},cacheVault:(i,s)=>{try{if(!r)throw new Nt;let a=JSON.stringify({items:Ba(i),folders:za(s)}),c=e(a);pe.set(ye.VAULT,c.content),pe.set(ye.IV,c.iv)}catch(a){a instanceof Nt||h("Failed to cache vault",a)}}}}var Nt=class extends Error{},Ya=$d;var qa=require("react/jsx-runtime"),Za=(0,lt.createContext)(null);function Od(){return{items:[],folders:[],isLoading:!0}}var{syncOnLaunch:_d}=(0,Ge.getPreferenceValues)();function Xa(e){let{children:t}=e,r=ln(),n=ue(),o=Da(),{getCachedVault:i,cacheVault:s}=Ya(),[a,c]=aa(ye.CURRENT_FOLDER_ID,null),[l,f]=(0,lt.useReducer)((g,E)=>({...g,...E}),{...Od(),...i()});$e(()=>{_d?v({isInitial:!0}):b()},r.active&&r.token);async function b(){try{f({isLoading:!0});let g=[],E=[];try{let[k,L]=await Promise.all([n.listItems(),n.listFolders()]);if(k.error)throw k.error;if(L.error)throw L.error;g=k.result,E=L.result,g.sort(Nd)}catch(k){throw o(new kt),k}f({items:g,folders:E}),o(g),s(g,E)}catch(g){await(0,Ge.showToast)(Ge.Toast.Style.Failure,"Failed to load vault items",Wn(g)),h("Failed to load vault items",g)}finally{f({isLoading:!1})}}async function v(g){let{isInitial:E=!1}=g??{},k=await(0,Ge.showToast)({title:"Syncing Vault...",message:E?"Background Task":void 0,style:Ge.Toast.Style.Animated});try{await n.sync(),await b(),await k.hide()}catch(L){await n.logout(),k.style=Ge.Toast.Style.Failure,k.title="Failed to sync vault",k.message=Wn(L)}}function x(g){c(typeof g=="string"?g:g?.id)}function A(g){let E=typeof g=="function"?g(l):g;f(E),s(E.items,E.folders)}let I=(0,lt.useMemo)(()=>({...l,items:Fd(l.items,a),isEmpty:l.items.length==0,isLoading:l.isLoading||r.isLoading,currentFolderId:a,syncItems:v,loadItems:b,setCurrentFolder:x,updateState:A}),[l,r.isLoading,a,v,b,x,A]);return(0,qa.jsx)(Za.Provider,{value:I,children:t})}function Fd(e,t){return!t||t===Tt.ALL?e:t===Tt.NO_FOLDER?e.filter(r=>r.folderId===null):e.filter(r=>r.folderId===t)}function Nd(e,t){return e.favorite&&t.favorite?0:e.favorite?-1:1}var ut=()=>{let e=(0,lt.useContext)(Za);if(e==null)throw new Error("useVault must be used within a VaultProvider");return e};var nr=require("react/jsx-runtime");function vr(){let e=ut(),t=ue(),r=async()=>{let o=await(0,te.showToast)(te.Toast.Style.Animated,"Locking Vault...","Please wait");await t.lock({reason:Ct.MANUAL}),await o.hide()},n=async()=>{let o=await(0,te.showToast)({title:"Logging Out...",style:te.Toast.Style.Animated});try{await t.logout(),await o.hide()}catch{o.title="Failed to logout",o.style=te.Toast.Style.Failure}};return(0,nr.jsxs)(te.ActionPanel.Section,{title:"Vault Actions",children:[(0,nr.jsx)(te.Action,{title:"Sync Vault",shortcut:{macOS:{key:"r",modifiers:["opt"]},windows:{key:"r",modifiers:["alt"]}},icon:te.Icon.ArrowClockwise,onAction:e.syncItems}),(0,nr.jsx)(te.Action,{icon:{source:"sf_symbols_lock.svg",tintColor:te.Color.PrimaryText},title:"Lock Vault",shortcut:{macOS:{key:"l",modifiers:["opt","shift"]},windows:{key:"l",modifiers:["alt","shift"]}},onAction:r}),(0,nr.jsx)(te.Action,{style:te.Action.Style.Destructive,title:"Logout",icon:te.Icon.Logout,onAction:n})]})}var dt=require("react/jsx-runtime"),Dd=`

`,ao="https://bitwarden.com/help/cli/#download-and-install",Ud=e=>`\`\`\`
${e}
\`\`\``,Vd=({error:e})=>{let t=Yr(e),r=(0,Ae.getPreferenceValues)().cliPath,n=e instanceof Lt,o=r||e instanceof et,i=[];if(o&&!n?i.push("# \u26A0\uFE0F Bitwarden CLI not found"):i.push("# \u{1F4A5} Whoops! Something went wrong"),n)i.push(`We couldn't download the [Bitwarden CLI](${ao}), you can always install it on your machine.`);else if(o){let s=r?` (${r})`:"";i.push(`We couldn't find the [Bitwarden CLI](${ao}) installed on your machine${s}.`)}else i.push(`The \`${Ae.environment.commandName}\` command crashed when we were not expecting it to.`);if(i.push("> Please read the `Setup` section in the [extension's description](https://www.raycast.com/jomifepe/bitwarden) to ensure that everything is properly configured."),i.push(`**Try restarting the command. If the issue persists, consider [reporting a bug on GitHub](${no}) to help us fix it.**`),t){let s=/incompatible architecture/gi.test(t);i.push(">## Technical details \u{1F913}",s&&`\u26A0\uFE0F We suspect that your Bitwarden CLI was installed using a version of NodeJS that's incompatible with your system architecture (e.g. x64 NodeJS on a M1/Apple Silicon Mac). Please make sure your have the correct versions of your software installed (e.g., ${Z==="macos"?"Homebrew, ":""}NodeJS, and Bitwarden CLI).`,Ud(t))}return(0,dt.jsx)(Ae.Detail,{markdown:i.filter(Boolean).join(Dd),actions:(0,dt.jsxs)(Ae.ActionPanel,{children:[(0,dt.jsxs)(Ae.ActionPanel.Section,{title:"Bug Report",children:[(0,dt.jsx)(Ir,{}),(0,dt.jsx)(xr,{})]}),o&&(0,dt.jsx)(Ae.Action.OpenInBrowser,{title:"Open Installation Guide",url:ao})]})})},yr=Vd;var co=require("react/jsx-runtime"),Cr=class extends Ja.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}async componentDidCatch(t,r){t instanceof Re?(this.setState(n=>({...n,hasError:!0,error:t.message})),await(0,or.showToast)(or.Toast.Style.Failure,t.message)):(or.environment.isDevelopment&&this.setState(n=>({...n,hasError:!0,error:t.message})),console.error("Error:",t,r))}render(){try{return this.state.hasError?(0,co.jsx)(yr,{error:this.state.error}):this.props.children}catch{return(0,co.jsx)(yr,{})}}};var Cl=require("@raycast/api");var ee=require("@raycast/api");var Qa=require("react"),un=require("react/jsx-runtime"),Md=e=>{let t=Qa.Children.toArray(e.children);return e.reverse&&t.reverse(),(0,un.jsx)(un.Fragment,{children:t})},ec=Md;var ft=require("@raycast/api");var dn=require("@raycast/api");function Bd(){let e=ue(),t=Ua();async function r(o){let i=await e.getItem(o);if(i.error)throw i.error;return i.result}async function n(o,i=(a=>a),s){let a=i(o);if(!zd(a))return a;let c=s?await(0,dn.showToast)(dn.Toast.Style.Animated,s):void 0,l=i(await Promise.race([t(o.id),r(o.id)]));return await c?.hide(),l}return n}function zd(e){try{return typeof e=="object"?JSON.stringify(e).includes(cr):typeof e=="string"?e===cr:!1}catch{return!1}}var z=Bd;var Pe=require("@raycast/api");var Dt=(e,t=!1)=>{let r=e.charAt(0).toUpperCase(),n=t?e.slice(1).toLowerCase():e.slice(1);return r+n};async function Q(e,t){let r=(0,Pe.getPreferenceValues)().windowActionOnCopy,n=Dt(e,!0);r==="keepOpen"?await(0,Pe.showToast)({title:n,message:t,style:Pe.Toast.Style.Success}):r==="closeAndPopToRoot"?(await(0,Pe.showHUD)(n),await(0,Pe.popToRoot)()):await(0,Pe.showHUD)(n)}var tc=require("react/jsx-runtime");function Gd(){let e=O(),t=z();if(!e.login?.password)return null;let r=async()=>{try{let n=await t(e,o=>o.login?.password,"Getting password...");n&&(await ft.Clipboard.copy(n,{transient:q("password")}),await Q("Copied password to clipboard"))}catch(n){await(0,ft.showToast)(ft.Toast.Style.Failure,"Failed to get password"),h("Failed to copy password",n)}};return(0,tc.jsx)(Y,{title:"Copy Password",icon:ft.Icon.Key,onAction:r,repromptDescription:`Copying the password of <${e.name}>`})}var lo=Gd;var pt=require("@raycast/api");var rc=require("@raycast/api"),fn=require("react");function Tr(){let[e,t]=(0,fn.useState)(void 0);return(0,fn.useEffect)(()=>{(0,rc.getFrontmostApplication)().then(r=>t(r.name)).catch(()=>t(void 0))},[]),e}var nc=require("react/jsx-runtime");function Wd(){let e=O(),t=z(),r=Hd();if(!e.login?.password)return null;let n=async()=>{try{let o=await t(e,i=>i.login?.password,"Getting password...");o&&await pt.Clipboard.paste(o)}catch(o){await(0,pt.showToast)(pt.Toast.Style.Failure,"Failed to get password"),h("Failed to paste password",o)}};return(0,nc.jsx)(Y,{title:r,icon:pt.Icon.Window,onAction:n,repromptDescription:`Pasting the password of <${e.name}>`})}function Hd(){let e=Tr();return e?`Paste Password into ${e}`:"Paste Password"}var uo=Wd;var We=require("@raycast/api");var oc=require("react/jsx-runtime");function Kd(){let e=ue(),t=O(),r=z();if(!t.login?.totp)return null;let n=async()=>{let o=await(0,We.showToast)(We.Toast.Style.Animated,"Getting TOTP code...");try{let i=await r(t,c=>c.id),{error:s,result:a}=await e.getTotp(i);if(s)throw s;await o?.hide(),await We.Clipboard.copy(a,{transient:q("other")}),await Q("Copied code to clipboard")}catch(i){o.message="Failed to get TOTP",o.style=We.Toast.Style.Failure,h("Failed to copy TOTP",i)}};return(0,oc.jsx)(Y,{title:"Copy TOTP",icon:We.Icon.Clipboard,onAction:n,shortcut:{macOS:{key:"t",modifiers:["opt"]},windows:{key:"t",modifiers:["alt"]}},repromptDescription:`Copying the TOTP of <${t.name}>`})}var fo=Kd;var He=require("@raycast/api");var ic=require("react/jsx-runtime");function jd(){let e=ue(),t=O(),r=z(),n=Tr();if(!t.login?.totp)return null;let o=async()=>{let i=await(0,He.showToast)(He.Toast.Style.Animated,"Getting TOTP code...");try{let s=await r(t,l=>l.id),{error:a,result:c}=await e.getTotp(s);if(a)throw a;await i?.hide(),await He.Clipboard.paste(c)}catch(s){i.message="Failed to get TOTP",i.style=He.Toast.Style.Failure,h("Failed to paste TOTP",s)}};return(0,ic.jsx)(Y,{title:n?`Paste TOTP into ${n}`:"Paste TOTP",icon:He.Icon.Window,onAction:o,shortcut:{macOS:{key:"t",modifiers:["opt","shift"]},windows:{key:"t",modifiers:["alt","shift"]}},repromptDescription:`Pasting the TOTP of <${t.name}>`})}var po=jd;var _e=require("@raycast/api");var sc=require("react/jsx-runtime");function Yd(){let e=O(),t=z();if(!e.login?.username)return null;let r=async()=>{try{let n=await t(e,o=>o.login?.username,"Getting username...");n&&(await _e.Clipboard.copy(n,{transient:q("other")}),await Q("Copied username to clipboard"))}catch(n){await(0,_e.showToast)(_e.Toast.Style.Failure,"Failed to get username"),h("Failed to copy username",n)}};return(0,sc.jsx)(_e.Action,{title:"Copy Username",icon:_e.Icon.Person,onAction:r,shortcut:{macOS:{key:"u",modifiers:["opt"]},windows:{key:"u",modifiers:["alt"]}}})}var mo=Yd;var Fe=require("@raycast/api");var cc=require("react/jsx-runtime");function Zd(){let e=O(),t=z();return ac(e)?(0,cc.jsx)(Fe.Action,{title:"Open in Browser",onAction:async()=>{try{let n=await t(e,ac,"Getting URL...");n&&await(0,Fe.open)(n)}catch(n){await(0,Fe.showToast)(Fe.Toast.Style.Failure,"Failed to get URL"),h("Failed to open URL in browser",n)}},icon:Fe.Icon.Globe,shortcut:{macOS:{key:"o",modifiers:["opt"]},windows:{key:"o",modifiers:["alt"]}}}):null}function ac(e){return e.login?.uris?.[0]?.uri}var ho=Zd;var ht=require("@raycast/api");var Xd={1:"01 - January",2:"02 - February",3:"03 - March",4:"04 - April",5:"05 - May",6:"06 - June",7:"07 - July",8:"08 - August",9:"09 - September",10:"10 - October",11:"11 - November",12:"12 - December"},qd={expMonth:e=>Xd[e]??e},uc=(e,t)=>qd[e]?.(t)??t;function dc(e,t){return`# \u{1F4B3} ${e}
&nbsp;
| ${Z==="macos"?"\u2325":"Alt"}	**Field** | **Value** |
| --- | --- |
${Object.entries(t).map(([r,n],o)=>{if(!n)return null;let i=qe[r],s=Bt[o];return`| ${s?`${s}.`:"&nbsp;"}	**${i}** | ${uc(r,n)} |`}).filter(Boolean).join(`
`)}
`}function fc(e){return Object.entries(e).map(([t,r])=>r?`${qe[t]}: ${uc(t,r)}`:null).filter(Boolean).join(`
`)}var lc=Object.keys(qe);function pn([e],[t]){let r=lc.indexOf(Array.isArray(e)?e[0]:e),n=lc.indexOf(Array.isArray(t)?t[0]:t);return r-n}var Ke="https://vault.bitwarden.com/images",Jd={[Le.VISA]:`${Ke}/visa-light.png`,[Le.MASTERCARD]:`${Ke}/mastercard-light.png`,[Le.AMEX]:`${Ke}/amex-light.png`,[Le.DISCOVER]:`${Ke}/discover-light.png`,[Le.DINERS_CLUB]:`${Ke}/diners_club-light.png`,[Le.JCB]:`${Ke}/jcb-light.png`,[Le.MAESTRO]:`${Ke}/maestro-light.png`,[Le.UNION_PAY]:`${Ke}/union_pay-light.png`,[Le.RU_PAY]:`${Ke}/ru_pay-light.png`};function pc(e){return Jd[e]}var he=require("@raycast/api");var mc=require("react");var mt=require("react/jsx-runtime");function Qd(e){let{itemName:t,details:r,sorter:n,label:o,getMarkdown:i,getCopyValue:s,titleMap:a}=e,c=Dt(o,!0),l=x=>async()=>{await he.Clipboard.copy(x,{transient:q("other")}),await Q("Copied details to clipboard")},{sortedDetails:f,sortedDetailsEntries:b}=(0,mc.useMemo)(()=>{if(!n)return{sortedDetails:r,sortedDetailsEntries:Object.entries(r)};let x=Object.entries(r).sort(n);return{sortedDetails:Object.fromEntries(x),sortedDetailsEntries:x}},[r]),v=async()=>{await he.Clipboard.copy(s(f),{transient:q("other")}),await Q(`Copied ${o} details to clipboard`)};return(0,mt.jsx)(he.Detail,{markdown:i(t,f),actions:(0,mt.jsxs)(he.ActionPanel,{children:[(0,mt.jsx)(he.ActionPanel.Section,{children:(0,mt.jsx)(he.Action,{title:`Copy ${c} Details`,onAction:v})}),(0,mt.jsx)(he.ActionPanel.Section,{title:`${c} Fields`,children:b.map(([x,A],I)=>{if(!A)return null;let g=Bt[I];return(0,mt.jsx)(he.Action,{title:`Copy ${ef(x,a)}`,icon:he.Icon.Clipboard,onAction:l(A),shortcut:g?{macOS:{key:g,modifiers:["opt"]},windows:{key:g,modifiers:["alt"]}}:void 0},`${I}-${x}`)})})]})})}function ef(e,t){return t?typeof t=="function"?t(e):t[e]:Dt(e,!0)}var mn=Qd;var go=require("react/jsx-runtime");function tf(){let{push:e}=(0,ht.useNavigation)(),t=O(),r=z();if(!t.card)return null;let n=async()=>{try{let o=await r(t,i=>i.card,"Getting card details...");o&&e((0,go.jsx)(mn,{label:"Card",details:o,itemName:t.name,titleMap:qe,sorter:pn,getMarkdown:dc,getCopyValue:fc}))}catch(o){await(0,ht.showToast)(ht.Toast.Style.Failure,"Failed to get card details"),h("Failed to show card details",o)}};return(0,go.jsx)(Y,{title:"Show Card",icon:ht.Icon.Eye,onAction:n,repromptDescription:`Showing the card details of <${t.name}>`})}var yo=tf;var gt=require("@raycast/api");function gc(e,t){return`# \u{1FAAA} ${e}
&nbsp;
| ${Z==="macos"?"\u2325":"Alt"}	**Field** | **Value** |
| --- | --- |
${Object.entries(t).map(([r,n],o)=>{if(!n)return null;let i=Je[r],s=Bt[o];return`| ${s?`${s}.`:"&nbsp;"}	**${i}** | ${n} |`}).filter(Boolean).join(`
`)}
`}function yc(e){return Object.entries(e).map(([t,r])=>r?`${Je[t]}: ${r}`:null).filter(Boolean).join(`
`)}var hc=Object.keys(Je);function hn([e],[t]){let r=hc.indexOf(Array.isArray(e)?e[0]:e),n=hc.indexOf(Array.isArray(t)?t[0]:t);return r-n}var wo=require("react/jsx-runtime");function rf(){let{push:e}=(0,gt.useNavigation)(),t=O(),r=z();if(!t.identity)return null;let n=async()=>{try{let o=await r(t,i=>i.identity,"Getting identity details...");o&&e((0,wo.jsx)(mn,{label:"Identity",details:o,itemName:t.name,titleMap:Je,sorter:hn,getMarkdown:gc,getCopyValue:yc}))}catch(o){await(0,gt.showToast)(gt.Toast.Style.Failure,"Failed to get identity details"),h("Failed to show identity details",o)}};return(0,wo.jsx)(Y,{title:"Show Identity",icon:gt.Icon.Eye,onAction:n,repromptDescription:`Showing the identity details of <${t.name}>`})}var bo=rf;var ce=require("@raycast/api");var ir=require("react/jsx-runtime");function nf(){let{push:e}=(0,ce.useNavigation)(),t=O(),r=z();if(!t.notes)return null;let n=async()=>{try{let o=await r(t,i=>i.notes,"Getting notes...");o&&e((0,ir.jsx)(of,{itemName:t.name,notes:o}))}catch(o){await(0,ce.showToast)(ce.Toast.Style.Failure,"Failed to get notes"),h("Failed to show notes",o)}};return(0,ir.jsx)(Y,{title:"Show Notes",icon:ce.Icon.Eye,onAction:n,repromptDescription:`Showing the notes of <${t.name}>`,shortcut:{macOS:{key:"n",modifiers:["opt"]},windows:{key:"n",modifiers:["alt"]}}})}function of({itemName:e,notes:t}){let r=async()=>{await ce.Clipboard.copy(t,{transient:q("other")}),await Q("Copied notes to clipboard")};return(0,ir.jsx)(ce.Detail,{markdown:sf(e,t),actions:(0,ir.jsx)(ce.ActionPanel,{children:(0,ir.jsx)(ce.Action,{title:"Copy Notes",onAction:r,icon:ce.Icon.Clipboard})})})}function sf(e,t){return`# \u{1F4C4} ${e}
&nbsp;
\`\`\`
${t}
\`\`\`
`}var sr=nf;var yt=require("@raycast/api");var Ar=require("react/jsx-runtime");function af({selector:e,sorter:t,labelMapper:r}){let n=O(),o=z(),i=cf(n,e,t);if(!i)return null;let s=(a,c)=>async()=>{try{let l=await o(n,f=>e(f)?.[a],`Getting ${a}...`);if(typeof l!="string")throw new Error(`Value of ${a} is not a string`);l&&(await yt.Clipboard.copy(l,{transient:q("other")}),await Q(`Copied ${c} to clipboard`))}catch(l){await(0,yt.showToast)(yt.Toast.Style.Failure,`Failed to copy ${a}`),h(`Failed to copy ${a}`,l)}};return(0,Ar.jsx)(Ar.Fragment,{children:i.map(([a,c],l)=>{if(!c||typeof c!="string")return null;let f=r?.(a)??Dt(a);return(0,Ar.jsx)(Y,{title:`Copy ${f}`,icon:yt.Icon.Clipboard,onAction:s(a,f),repromptDescription:`Copying the ${f} of <${n.name}>`},`${l}-${a}`)})})}function cf(e,t,r){let n=t(e);if(n==null)return null;let o=Object.entries(n);return r&&o.sort(r),o}var wt=af;var wc=require("react/jsx-runtime");function lf(){return(0,wc.jsx)(wt,{selector:e=>e.identity,sorter:hn,labelMapper:e=>Je[e]})}var So=lf;var bc=require("react/jsx-runtime");function uf(){return(0,bc.jsx)(wt,{selector:e=>e.card,sorter:pn,labelMapper:e=>qe[e]})}var Eo=uf;var Sc=require("react/jsx-runtime");function df(){return(0,Sc.jsx)(wt,{selector:t=>t.login?.uris?.reduce((r,n,o)=>(n.uri&&(r[`URI ${o+1}`]=n.uri),r),{})??{}})}var xo=df;var Pr=require("@raycast/api");var ff=require("react/jsx-runtime");var Ec=require("react/jsx-runtime");function pf(){return(0,Ec.jsx)(wt,{selector:t=>Object.fromEntries(t.fields?.map(r=>[r.name,r.value])||[])})}var Io=pf;var bt=require("@raycast/api");var xc=require("react/jsx-runtime");function mf(){let e=O(),t=z();if(!e.sshKey?.publicKey)return null;let r=async()=>{try{let n=await t(e,o=>o.sshKey?.publicKey,"Getting public key...");n&&(await bt.Clipboard.copy(n,{transient:q("other")}),await Q("Copied public key to clipboard"))}catch(n){await(0,bt.showToast)(bt.Toast.Style.Failure,"Failed to get public key"),h("Failed to copy public key",n)}};return(0,xc.jsx)(Y,{title:"Copy Public Key",icon:bt.Icon.Key,onAction:r,repromptDescription:`Copying the public key of <${e.name}>`})}var vo=mf;var Se=require("@raycast/api");var To=require("@raycast/api"),ke=require("react");var Ic=require("react");function vc(e,t){(0,Ic.useEffect)(()=>{e()},t)}var Co=require("react/jsx-runtime"),Cc=(0,ke.createContext)({});function Tc({children:e}){let{items:t}=ut(),[r,n]=(0,ke.useState)();vc(async()=>{let s=await hf();n(s??[])},[]),(0,ke.useEffect)(()=>{if(!r)return;let s=t.flatMap(a=>a.favorite?r.some(c=>c===a.id)?[]:[a.id]:[]);s.length!==0&&n(Array.from(new Set(s)))},[t,!!r]),(0,ke.useEffect)(()=>{r&&gf(r)},[r]);let o=s=>{n((a=[])=>r?.includes(s.id)?a.filter(c=>c!==s.id):[s.id,...a])},i=({id:s},a)=>{if(!r)return;let c=r.indexOf(s);if(c===-1)return;let l=c+(a==="up"?-1:1);if(l>=0&&l<r.length){let f=r.slice(0);f.splice(c,1),f.splice(l,0,s),n(f)}};return r?(0,Co.jsx)(Cc.Provider,{value:{favoriteOrder:r,setFavoriteOrder:n,toggleFavorite:o,moveFavorite:i},children:e}):(0,Co.jsx)(Qt,{})}var kr=()=>{let e=(0,ke.useContext)(Cc);if(!e)throw new Error("useFavoritesContext must be used within a FavoritesProvider");return e};async function hf(){try{let e=await To.LocalStorage.getItem(V.VAULT_FAVORITE_ORDER);return e?JSON.parse(e):void 0}catch(e){h("Failed to get favorite order from local storage",e);return}}async function gf(e){try{await To.LocalStorage.setItem(V.VAULT_FAVORITE_ORDER,JSON.stringify(e))}catch(t){h("Failed to persist favorite order to local storage",t)}}function Ac(e){let{favoriteOrder:t}=kr();return(0,ke.useMemo)(()=>{let r=e.reduce((n,o)=>{let i=t.indexOf(o.id);return o.favorite||i!==-1?n.favoriteItems.push({...o,listOrder:i??Number.MAX_SAFE_INTEGER}):n.nonFavoriteItems.push(o),n},{favoriteItems:[],nonFavoriteItems:[]});return r.favoriteItems.sort((n,o)=>n.listOrder-o.listOrder),r},[e,t])}var Ne=require("react/jsx-runtime");function yf(){let e=O(),{favoriteOrder:t,toggleFavorite:r,moveFavorite:n}=kr(),o=e.favorite,i=t.includes(e.id),s=async()=>{try{await r(e)}catch(c){await(0,Se.showToast)(Se.Toast.Style.Failure,"Failed to toggle favorite \u2639\uFE0F"),h("Failed to toggle favorite",c)}},a=c=>()=>n(e,c);return(0,Ne.jsxs)(Ne.Fragment,{children:[!o&&(0,Ne.jsx)(Se.Action,{title:i?"Remove Favorite":"Mark As Favorite",onAction:s,icon:i?Se.Icon.StarDisabled:Se.Icon.Star,shortcut:{macOS:{key:"f",modifiers:["opt"]},windows:{key:"f",modifiers:["alt"]}}}),(o||i)&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)(Se.Action,{title:"Move Favorite Up",onAction:a("up"),icon:Se.Icon.ArrowUpCircleFilled,shortcut:{macOS:{key:"arrowUp",modifiers:["opt","shift"]},windows:{key:"arrowUp",modifiers:["alt","shift"]}}}),(0,Ne.jsx)(Se.Action,{title:"Move Favorite Down",onAction:a("down"),icon:Se.Icon.ArrowDownCircleFilled,shortcut:{macOS:{key:"arrowDown",modifiers:["opt","shift"]},windows:{key:"arrowDown",modifiers:["alt","shift"]}}})]})]})}var Pc=yf;var St=require("@raycast/api");var Lc=require("react/jsx-runtime");function wf(){let e=O(),t=z();if(!e.sshKey?.keyFingerprint)return null;let r=async()=>{try{let n=await t(e,o=>o.sshKey?.keyFingerprint,"Getting key fingerprint...");n&&(await St.Clipboard.copy(n,{transient:q("other")}),await Q("Copied key fingerprint to clipboard"))}catch(n){await(0,St.showToast)(St.Toast.Style.Failure,"Failed to get key fingerprint"),h("Failed to copy key fingerprint",n)}};return(0,Lc.jsx)(Y,{title:"Copy Key Fingerprint",icon:St.Icon.Key,onAction:r,repromptDescription:`Copying the key fingerprint of <${e.name}>`})}var kc=wf;var Et=require("@raycast/api");var $c=require("react/jsx-runtime");function bf(){let e=O(),t=z();if(!e.sshKey?.privateKey)return null;let r=async()=>{try{let n=await t(e,o=>o.sshKey?.privateKey,"Getting private key...");n&&(await Et.Clipboard.copy(n,{transient:q("other")}),await Q("Copied private key to clipboard"))}catch(n){await(0,Et.showToast)(Et.Toast.Style.Failure,"Failed to get private key"),h("Failed to copy private key",n)}};return(0,$c.jsx)(Y,{title:"Copy Private Key",icon:Et.Icon.Key,onAction:r,repromptDescription:`Copying the private key of <${e.name}>`})}var Rc=bf;var C=require("react/jsx-runtime"),{primaryAction:Sf}=(0,ee.getPreferenceValues)(),Ef=()=>{let{type:e,id:t}=O();return(0,C.jsxs)(ee.ActionPanel,{children:[e===1&&(0,C.jsxs)(ee.ActionPanel.Section,{children:[(0,C.jsxs)(ec,{reverse:Sf==="paste",children:[(0,C.jsx)(lo,{}),(0,C.jsx)(uo,{})]}),(0,C.jsx)(fo,{}),(0,C.jsx)(po,{}),(0,C.jsx)(mo,{}),(0,C.jsx)(ho,{}),(0,C.jsx)(xo,{}),(0,C.jsx)(sr,{})]}),e===3&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(yo,{})}),(0,C.jsx)(ee.ActionPanel.Section,{title:"Card Fields",children:(0,C.jsx)(Eo,{})}),(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(sr,{})})]}),e===4&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(bo,{})}),(0,C.jsx)(ee.ActionPanel.Section,{title:"Identity Fields",children:(0,C.jsx)(So,{})}),(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(sr,{})})]}),e===2&&(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(sr,{})}),e===5&&(0,C.jsxs)(ee.ActionPanel.Section,{children:[(0,C.jsx)(vo,{}),(0,C.jsx)(kc,{}),(0,C.jsx)(Rc,{})]}),(0,C.jsx)(ee.ActionPanel.Section,{title:"Custom Fields",children:(0,C.jsx)(Io,{})}),(0,C.jsx)(ee.ActionPanel.Section,{title:"Item Actions",children:(0,C.jsx)(Pc,{})}),(0,C.jsx)(vr,{}),(0,C.jsx)(br,{}),ee.environment.isDevelopment&&(0,C.jsx)(ee.ActionPanel.Section,{title:"Development",children:(0,C.jsx)(ee.Action.CopyToClipboard,{title:"Copy item UUID",content:t})})]})},Oc=Ef;var de=require("@raycast/api"),Fc=require("react");var _c={1:{icon:{source:xe[1],tintColor:de.Color.Blue},tooltip:Qe[1]},3:{icon:{source:xe[3],tintColor:de.Color.Green},tooltip:Qe[3]},4:{icon:{source:xe[4],tintColor:de.Color.Orange},tooltip:Qe[4]},2:{icon:{source:xe[2],tintColor:de.Color.PrimaryText},tooltip:Qe[2]},5:{icon:{source:xe[5],tintColor:de.Color.SecondaryText},tooltip:Qe[5]}};function Nc(e,t){let{favoriteOrder:r}=kr();return(0,Fc.useMemo)(()=>{try{let n=[];if(t?.id&&n.push({icon:{source:de.Icon.Folder,tintColor:de.Color.SecondaryText},tag:{value:t.name,color:de.Color.SecondaryText},tooltip:`${t.name} Folder`}),e.favorite?n.push({icon:{source:de.Icon.Star,tintColor:de.Color.Blue},tooltip:"Bitwarden Favorite"}):r.includes(e.id)&&n.push({icon:{source:de.Icon.Star,tintColor:de.Color.Yellow},tooltip:"Favorite"}),e.reprompt===1&&n.push({icon:{source:de.Icon.Lock,tintColor:de.Color.SecondaryText},tooltip:"Master password re-prompt"}),!_c[e.type])throw new Error(`No accessory defined for item ${e.name} with type ${e.type}`);return n.push(_c[e.type]),n}catch(n){return h("Failed to get item accessories",n),[]}},[r,e.favorite,e.reprompt,e.type,t?.id,t?.name])}var wn=require("@raycast/api"),Il=require("react");var bl=require("@raycast/api");var fl=ne(cl(),1),ep=e=>e.normalize("NFKD").split(""),ll=/^\s+$/,ul=/^[`~!@#$%^&*()\-=_+{}[\]\|\\;':",./<>?]+$/,Vo={insertOrder:"insertOrder",bestMatch:"bestMatch"},tp={keySelector:e=>e,threshold:.6,ignoreCase:!0,ignoreSymbols:!0,normalizeWhitespace:!0,returnMatchData:!1,useDamerau:!0,useSellers:!0,useSeparatedUnicode:!1,sortBy:Vo.bestMatch},rp=()=>{},np=e=>e instanceof Array?e:[e];function pl(e,t){let r=t.ignoreCase?e.toLocaleLowerCase():e,n=[],o=[],i=!0,s=0,a=t.useSeparatedUnicode?ep(r):(0,fl.default)(r);for(let c of a)ll.lastIndex=0,ul.lastIndex=0,t.normalizeWhitespace&&ll.test(c)?i||(n.push(" "),o.push(s),i=!0):t.ignoreSymbols&&ul.test(c)||(t.useSeparatedUnicode?n.push(c):n.push(c.normalize()),o.push(s),i=!1),s+=c.length;for(o.push(e.length);n[n.length-1]===" ";)n.pop(),o.pop();return{original:e,normal:n,map:o}}function op(e,t){return{index:t[e.start],length:t[e.end+1]-t[e.start]}}function ml(e,t){if(t===0)return{index:0,length:0};let r=t;for(let n=e.length-2;n>0&&r>1;n--){let o=e[n];r=o[r]<o[r-1]?r:r-1}return{start:r-1,end:t-1}}function ip(){return{start:0,end:0}}var sp=()=>!0,ap=(e,t)=>e<t;function cp(e,t){let r=new Array(e);for(let n=0;n<e;n++)r[n]=new Array(t),r[n][0]=n;for(let n=0;n<t;n++)r[0][n]=n;return r}function lp(e,t){let r=new Array(e);r[0]=new Array(t).fill(0);for(let n=1;n<e;n++)r[n]=new Array(t),r[n][0]=n;return r}function hl(e,t,r,n,o){let i=r[n],s=r[n+1],a=e[n]===t[o]?0:1,c,l=s[o]+1;(c=i[o+1]+1)<l&&(l=c),(c=i[o]+a)<l&&(l=c),s[o+1]=l}function gl(e,t,r,n){for(let o=0;o<e.length;o++)hl(e,t,r,o,n)}function up(e,t,r,n){if(n===0){gl(e,t,r,n);return}e.length>0&&hl(e,t,r,0,n);for(let o=1;o<e.length;o++){let i=r[o-1],s=r[o],a=r[o+1],c=e[o]===t[n]?0:1,l,f=a[n]+1;(l=s[n+1]+1)<f&&(f=l),(l=s[n]+c)<f&&(f=l),e[o]===t[n-1]&&e[o-1]===t[n]&&(l=i[n-1]+c)<f&&(f=l),a[n+1]=f}}function dp(e,t,r){let n=e;for(let o=0;o<t.length;o++){let i=t[o];n.children[i]==null&&(n.children[i]={children:{},candidates:[],depth:0}),n.depth=Math.max(n.depth,t.length-o),n=n.children[i]}n.candidates.push(r)}function dl(e,t,r,n){for(let o of r){let i=np(n.keySelector(o)).map((s,a)=>({index:t,keyIndex:a,item:o,normalized:pl(s,n)}));t++;for(let s of i)dp(e,s.normalized.normal,s)}}function fp(e,t){let r=t.score-e.score;if(r!==0)return r;let n=e.match.start-t.match.start;if(n!==0)return n;let o=e.keyIndex-t.keyIndex;if(o!==0)return o;let i=e.lengthDiff-t.lengthDiff;return i!==0?i:yl(e,t)}function yl(e,t){return e.index-t.index}function pp(e){switch(e){case Vo.bestMatch:return fp;case Vo.insertOrder:return yl;default:throw new Error(`unknown sortBy method ${e}`)}}function wl(e,t,r,n,o,i,s){let a={item:r.item,normalized:r.normalized,score:n,match:o,index:r.index,keyIndex:r.keyIndex,lengthDiff:i};t[r.index]==null?(t[r.index]=e.length,e.push(a)):s(a,e[t[r.index]])<0&&(e[t[r.index]]=a)}var mp=Math.max,hp=e=>e;function gp(e,t,r,n,o){let i=t+o,s=Math.min(r.length,t+e.depth+1),a=Math.ceil((i+s)/2);return 1-(a-s)/a>=n}function yp(e,t,r,n,o,i){return 1-Math.min(o,i-(e.depth+1))/r.length>=n}function wp(e,t,r,n,o,i,s){let a=[];for(let l in e.children){let f=e.children[l];a.push([f,1,l,0,t.length])}let c=new Array(e.depth);for(;a.length!==0;){let[l,f,b,v,x]=a.pop();c[f-1]=b,r.score(t,c,n,f-1);let A=f,I=n[n.length-1][A],g=v,E=x;if(r.shouldUpdateScore(I,x)&&(g=A,E=I),l.candidates.length>0){let k=r.getLength(t.length,f),L=1-E/k;if(L>=s.threshold){let D=ml(n,g),N=Math.abs(f-t.length);for(let K of l.candidates)wl(o,i,K,L,D,N,r.compareItems)}}for(let k in l.children){let L=l.children[k];r.shouldContinue(L,f,t,s.threshold,E,I)&&a.push([L,f+1,k,g,E])}}}function bp(e,t,r){let n=r.useSellers?lp:cp,o={score:r.useDamerau?up:gl,getLength:r.useSellers?hp:mp,shouldUpdateScore:r.useSellers?ap:sp,shouldContinue:r.useSellers?yp:gp,walkBack:r.useSellers?ml:ip,compareItems:pp(r.sortBy)},i={},s=[],a=n(e.length+1,t.depth+1);if(r.threshold<=0||e.length===0)for(let l of t.candidates)wl(s,i,l,0,{index:0,length:0},e.length,o.compareItems);wp(t,e,o,a,s,i,r);let c=s.sort(o.compareItems);if(r.returnMatchData){let l=r.useSellers?op:rp;return c.map(f=>({item:f.item,original:f.normalized.original,key:f.normalized.normal.join(""),score:f.score,match:l(f.match,f.normalized.map)}))}return c.map(l=>l.item)}var yn=class{constructor(t,r){this.options=Object.assign({},tp,r),this.trie={children:{},candidates:[],depth:0},dl(this.trie,0,t,this.options),this.count=t.length}add(...t){dl(this.trie,this.count,t,this.options),this.count+=t.length}search(t,r){return r=Object.assign({},this.options,r),bp(pl(t,this.options).normal,this.trie,r)}};var Rr=require("react"),Sl=require("url");function El(e){try{return`https://icons.bitwarden.net/${new Sl.URL(e).hostname}/icon.png`}catch{return bl.Icon.Globe}}function xl(e){let[t,r]=(0,Rr.useState)(""),n=(0,Rr.useMemo)(()=>new yn(e,{ignoreSymbols:!1,threshold:.7,keySelector:i=>{let{login:s,card:a}=i;return[i.name,Qe[i.type],s?.username,s?.uris?.map(({uri:c})=>c),a?.brand,a?.number].flat().filter(c=>!!c)}}),[e]),o=(0,Rr.useMemo)(()=>t?n.search(t):e,[n,t]);return{setSearchText:r,filteredItems:o}}var{fetchFavicons:Sp}=(0,wn.getPreferenceValues)(),Ep={1:e=>{let t=e.login?.uris?.[0]?.uri;return Sp&&t?El(t):xe[1]},3:e=>{let{brand:t}=e.card??{};if(t){let r=pc(t);if(r)return r}return xe[3]},4:()=>xe[4],2:()=>xe[2],5:()=>xe[5]};function vl(e){return(0,Il.useMemo)(()=>{let t=Ep[e.type]?.(e);return t||wn.Icon.QuestionMark},[e.type,e.card?.brand,e.login?.uris?.[0]?.uri])}var bn=require("react/jsx-runtime"),xp=({item:e,folder:t})=>{let r=vl(e),n=Nc(e,t);return(0,bn.jsx)(Wo.Provider,{value:e,children:(0,bn.jsx)(Cl.List.Item,{id:e.id,title:e.name,accessories:n,icon:r,subtitle:e.login?.username||void 0,actions:(0,bn.jsx)(Oc,{})})})},Tl=xp;var Vt=require("@raycast/api");var $r=require("react/jsx-runtime");function Mo(){let{folders:e,currentFolderId:t,setCurrentFolder:r}=ut();return e.length===0?null:(0,$r.jsxs)(Vt.List.Dropdown,{tooltip:"Select a folder",placeholder:"Search folders",defaultValue:t??Tt.ALL,onChange:r,throttle:!0,children:[(0,$r.jsx)(Vt.List.Dropdown.Item,{value:Tt.ALL,title:"All",icon:Vt.Icon.Folder}),e.map(n=>{let o=n.id||Tt.NO_FOLDER;return(0,$r.jsx)(Vt.List.Dropdown.Item,{value:o,title:n.name,icon:Vt.Icon.Folder},o)})]})}var G=require("react/jsx-runtime"),Ip=()=>(0,G.jsx)(Cr,{children:(0,G.jsx)(Js,{loadingFallback:(0,G.jsx)(Qt,{}),children:(0,G.jsx)(to,{unlock:!0,children:(0,G.jsx)(Va,{children:(0,G.jsx)(Xa,{children:(0,G.jsx)(Tc,{children:(0,G.jsx)(vp,{})})})})})})});function vp(){let{items:e,folders:t,isLoading:r,isEmpty:n}=ut(),{setSearchText:o,filteredItems:i}=xl(e),{favoriteItems:s,nonFavoriteItems:a}=Ac(i);return(0,G.jsxs)(Ve.List,{searchBarPlaceholder:"Search vault",filtering:!1,isLoading:r,searchBarAccessory:(0,G.jsx)(Mo,{}),onSearchTextChange:o,children:[s.length>0?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Ve.List.Section,{title:"Favorites",children:(0,G.jsx)(Bo,{items:s,folders:t})}),(0,G.jsx)(Ve.List.Section,{title:"Other Items",children:(0,G.jsx)(Bo,{items:a,folders:t})})]}):(0,G.jsx)(Bo,{items:a,folders:t}),r?(0,G.jsx)(Ve.List.EmptyView,{icon:Ve.Icon.ArrowClockwise,title:"Loading...",description:"Please wait."}):(0,G.jsx)(Ve.List.EmptyView,{icon:{source:"bitwarden-64.png"},title:n?"Vault empty.":"No matching items found.",description:n?"Hit the sync button to sync your vault or try logging in again.":"Hit the sync button to sync your vault.",actions:!r&&(0,G.jsx)(Ve.ActionPanel,{children:(0,G.jsx)(vr,{})})})]})}function Bo({items:e,folders:t}){return(0,G.jsx)(G.Fragment,{children:e.map(r=>(0,G.jsx)(Tl,{item:r,folder:Cp(t,r)},r.id))})}function Cp(e,t){return e.find(r=>r.id===t.folderId)}var Tp=Ip;
/*! Bundled license information:

node-stream-zip/node_stream_zip.js:
  (**
   * @license node-stream-zip | (c) 2020 Antelle | https://github.com/antelle/node-stream-zip/blob/master/LICENSE
   * Portions copyright https://github.com/cthackers/adm-zip | https://raw.githubusercontent.com/cthackers/adm-zip/master/LICENSE
   *)
*/

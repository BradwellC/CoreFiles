"use strict";var p=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var R=(t,e)=>{for(var i in e)p(t,i,{get:e[i],enumerable:!0})},j=(t,e,i,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of D(e))!h.call(t,n)&&n!==i&&p(t,n,{get:()=>e[n],enumerable:!(a=S(e,n))||a.enumerable});return t};var N=t=>j(p({},"__esModule",{value:!0}),t);var F={};R(F,{default:()=>C});module.exports=N(F);var l=require("@raycast/api"),w=require("path"),y=require("fs/promises"),g=require("child_process");async function P(t,...e){if(process.platform==="win32")return Promise.reject(new Error("Swift functions are not supported on Windows"));let i=(0,w.join)(l.environment.assetsPath,"compiled_raycast_swift/AppleReminders");return await(0,y.chmod)(i,"755"),new Promise((a,n)=>{let f=[t];for(let o of e)try{f.push(JSON.stringify(o,(r,s)=>s===void 0?null:s))}catch(r){n(new c("Failed to serialize input to JSON: "+r.message));return}let d=(0,g.spawn)(i,f),u=[],m=[];d.stdout?.on("data",o=>{u.push(o.toString())}),d.stderr?.on("data",o=>{m.push(o.toString())}),d.on("exit",o=>{if(o===0)try{let r=u.join("").trim();r.length!=0?a(JSON.parse(r)):a(null)}catch(r){let s=new c("Failed to deserialize result from JSON: "+r.message);s.stdout=u.join("").trim(),s.stderr=m.join("").trim(),n(s)}else{let r=new c(m.join("").trim()||u.join("").trim()||"Could not get any data");r.stdout=u.join("").trim(),r.stderr=m.join("").trim(),n(r)}}),d.on("error",o=>{n(o)})})}async function x(t){return await P("createReminder",t)}var c=class extends Error{constructor(e){super(e),this.name="SwiftError"}};async function C(t){return t.dueDate&&t.dueDate.includes("T")&&(t.dueDate=new Date(t.dueDate).toISOString()),await x(t)}
